(this["webpackJsonplevis-dashboard"]=this["webpackJsonplevis-dashboard"]||[]).push([[0],{290:function(e,t,a){e.exports=a(514)},295:function(e,t,a){},501:function(e,t,a){},502:function(e,t,a){},504:function(e,t,a){},505:function(e,t,a){},506:function(e,t,a){},510:function(e,t,a){},511:function(e,t,a){},512:function(e,t,a){},513:function(e,t,a){},514:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),l=a.n(s),i=(a(295),a(296),a(12)),o=a(230),c=a(13),u=a(14),d=a(16),m=a(15),p=a(91),h=a(63),_=a(76),y=a(580),f=a(26),g=a.n(f),E=(a(233),a(231),function(e,t){var a=Number(e),n=Number(t);return a&&n?100*(1-n/a):0}),b=function(e,t){return E(e,t).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},v=function(e,t){return b(e,t)>=0?"positive-val":"negative-val"},O=function(e,t){return Math.abs(E(e,t)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},k=function(e,t){return Math.abs(E(e,t))>10},N=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.product&&this.props.product.products[this.props.graph.selectedProductId]?this.props.product.products[this.props.graph.selectedProductId].total[this.props.graph.graphDomain[0].slice(0,4)]:{},t=this.props.product&&this.props.product.products[this.props.graph.selectedProductId];return r.a.createElement("li",{className:"bg-"+this.props.graph.graphDomain[0].slice(0,4)+" paper textured yearly total-yearly-val"},r.a.createElement("ul",{className:"body variance-val"},r.a.createElement("li",null,r.a.createElement(_.a,{variant:"h5"},"Sell-Out Units"),r.a.createElement(y.a,{title:t?"Sum of YTD actuals + prediction for selected year (where available)":"Please select a product first"},r.a.createElement(_.a,{variant:"h2"},g.a.toHumanString(e.sell_out_units_ytd||0)))),r.a.createElement("li",null,r.a.createElement(_.a,{variant:"h5"},"Demand"),r.a.createElement(y.a,{title:t?"Sum of adjusted demand YTD actuals + PDU prediction for selected year":"Please select a product first"},r.a.createElement(_.a,{variant:"h2"},g.a.toHumanString(e.demand_units_ytg||0)))),r.a.createElement("li",null,r.a.createElement(_.a,{variant:"h5"},"Sell-Out Units LY"),r.a.createElement(y.a,{title:t?"Sum of LY actuals for selected year (where available)":"Please select a product first"},r.a.createElement(_.a,{variant:"h4"},g.a.toHumanString(e.sell_out_units_ly||0)))),r.a.createElement("li",null,r.a.createElement(_.a,{variant:"h5"},"Demand LY"),r.a.createElement(y.a,{title:t?"Sum of adjusted demand LY actuals for selected year":"Please select a product first"},r.a.createElement(_.a,{variant:"h4"},g.a.toHumanString(e.demand_units_ly||0)))),r.a.createElement("li",null,r.a.createElement(_.a,{variant:"h5"},"%Variance"),r.a.createElement(_.a,{variant:"h4",className:v(e.sell_out_units_ytd,e.sell_out_units_ly)+" p-l-10"},O(e.sell_out_units_ytd,e.sell_out_units_ly),"%")),r.a.createElement("li",null,r.a.createElement(_.a,{variant:"h5"},"%Variance"),r.a.createElement(_.a,{variant:"h4",className:v(e.demand_units_ytg,e.demand_units_ly)+" p-l-10"},O(e.demand_units_ytg,e.demand_units_ly),"%"))))}}]),a}(n.Component),S=Object(i.b)((function(e,t){return{product:e.product,graph:e.graph}}),{})(N),D=a(8),j=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"demandData",value:function(){var e=this.props.product&&this.props.product.products[this.props.graph.selectedProductId]?this.props.product.products[this.props.graph.selectedProductId].total[this.props.graph.graphDomain[0].slice(0,4)]:{};if(this.props.product&&this.props.product.products[this.props.graph.selectedProductId]&&e&&e.demand_units_ly&&e.demand_units_ytd)return[{name:"2019",demand:e.demand_units_ly,sellout:e.demand_units_ytd,final:Math.abs(e.demand_units_ly-e.demand_units_ytd)}]}},{key:"sellOutData",value:function(){var e=this.props.product&&this.props.product.products[this.props.graph.selectedProductId]?this.props.product.products[this.props.graph.selectedProductId].total[this.props.graph.graphDomain[0].slice(0,4)]:{};if(this.props.product&&this.props.product.products[this.props.graph.selectedProductId]&&e&&e.sell_out_units_ly&&e.sell_out_units_ytd)return[{name:"2020",demand:e.sell_out_units_ly,sellout:e.sell_out_units_ytd,final:Math.abs(e.sell_out_units_ly-e.sell_out_units_ytd)}]}},{key:"render",value:function(){var e=this.props.product&&this.props.product.products[this.props.graph.selectedProductId]?this.props.product.products[this.props.graph.selectedProductId].total[this.props.graph.graphDomain[0].slice(0,4)]:{};return r.a.createElement("li",{className:"comparison-sec paper"},r.a.createElement("div",{className:"d-flex justify-center m-b-9"},r.a.createElement(_.a,{variant:"h4",className:""},this.props.graph.graphDomain[0].slice(0,4).toString()-1," vs ",this.props.graph.graphDomain[0].slice(0,4)," YEARLY COMPARISON"),r.a.createElement("ul",{className:"m-l-15 d-flex"},r.a.createElement("li",{className:""},this.props.graph.graphDomain[0].slice(0,4).toString()-1),r.a.createElement("li",{className:""},this.props.graph.graphDomain[0].slice(0,4)))),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:""},r.a.createElement(D.b,{barSize:40,width:200,height:165,data:this.sellOutData(),margin:{top:5,right:0,left:20,bottom:5}},r.a.createElement(D.c,{vertical:!1}),r.a.createElement(D.m,{mirror:!0,orientation:"right",fontSize:"10px",dy:7,tickFormatter:function(e){return g.a.toHumanString(e)},tickLine:!1}),r.a.createElement(D.a,{isAnimationActive:!1,dataKey:"demand",fill:"#ea9191"}),r.a.createElement(D.a,{isAnimationActive:!1,dataKey:"sellout",fill:"#79ade8"}),r.a.createElement(D.a,{isAnimationActive:!1,barSize:25,dataKey:"sellout",fill:"transparent"}),e.sell_out_units_ly>e.sell_out_units_ytd&&r.a.createElement(D.a,{isAnimationActive:!1,barSize:2,stackId:"sellout",dataKey:"sellout",fill:"transparent"}),e.sell_out_units_ly<=e.sell_out_units_ytd&&r.a.createElement(D.a,{isAnimationActive:!1,barSize:2,stackId:"sellout",dataKey:"demand",fill:"transparent"}),r.a.createElement(D.a,{isAnimationActive:!1,barSize:2,stackId:"sellout",dataKey:"final",fill:e.sell_out_units_ly>e.sell_out_units_ytd?"red":"green"},e.sell_out_units_ly>e.sell_out_units_ytd&&r.a.createElement(D.e,{x:143,dataKey:"final",y:String(165/e.sell_out_units_ly*(Math.abs(e.sell_out_units_ly-e.sell_out_units_ytd)/2)),fill:e.sell_out_units_ly>e.sell_out_units_ytd?"red":"green",fontSize:"10px",position:"left",formatter:function(e){return g.a.toHumanString(e)}}),e.sell_out_units_ly<=e.sell_out_units_ytd&&r.a.createElement(D.e,{x:143,dataKey:"final",y:String(165/e.sell_out_units_ytd*(Math.abs(10*e.sell_out_units_ytd-e.sell_out_units_ly)/2)),fill:e.sell_out_units_ly>e.sell_out_units_ytd?"red":"green",fontSize:"10px",position:"left",formatter:function(e){return g.a.toHumanString(e)}})),r.a.createElement(D.a,{isAnimationActive:!1,dataKey:"sellout",fill:"transparent"})),r.a.createElement("div",{className:"yearly-heading"},"SELL-OUT")),r.a.createElement("div",null,r.a.createElement(D.b,{barSize:40,width:220,height:165,data:this.demandData(),margin:{top:5,right:30,left:0,bottom:5}},r.a.createElement(D.c,{vertical:!1}),r.a.createElement(D.m,{mirror:!0,orientation:"left",fontSize:"10px",dy:7,tickLine:!1,tickFormatter:function(e){return g.a.toHumanString(e)}}),r.a.createElement(D.a,{isAnimationActive:!1,dataKey:"sellout",fill:"transparent"}),e.demand_units_ly>e.demand_units_ytd&&r.a.createElement(D.a,{isAnimationActive:!1,barSize:2,stackId:"demand",dataKey:"sellout",fill:"transparent"}),e.demand_units_ly<=e.demand_units_ytd&&r.a.createElement(D.a,{isAnimationActive:!1,barSize:2,stackId:"demand",dataKey:"demand",fill:"transparent"}),r.a.createElement(D.a,{isAnimationActive:!1,barSize:2,stackId:"demand",dataKey:"final",fill:e.demand_units_ly>e.demand_units_ytd?"red":"green"},e.demand_units_ly>e.demand_units_ytd&&r.a.createElement(D.e,{x:63,dataKey:"final",y:String(165/e.demand_units_ly*(Math.abs(e.demand_units_ly-e.demand_units_ytd)/2)),fill:e.demand_units_ly>e.demand_units_ytd?"red":"green",fontSize:"10px",position:"right",formatter:function(e){return g.a.toHumanString(e)}}),e.demand_units_ly<=e.demand_units_ytd&&r.a.createElement(D.e,{x:63,dataKey:"final",y:String(165/e.demand_units_ytd*(Math.abs(e.demand_units_ytd-e.demand_units_ly)/2)),fill:e.demand_units_ly>e.demand_units_ytd?"red":"green",fontSize:"10px",position:"right",formatter:function(e){return g.a.toHumanString(e)}})),r.a.createElement(D.a,{isAnimationActive:!1,barSize:25,dataKey:"sellout",fill:"transparent"}),r.a.createElement(D.a,{isAnimationActive:!1,dataKey:"demand",fill:"#ea9191"}),r.a.createElement(D.a,{isAnimationActive:!1,dataKey:"sellout",fill:"#79ade8"})),r.a.createElement("div",{className:"yearly-heading demand-head"},"Demand"))))}}]),a}(n.Component),I=Object(i.b)((function(e,t){return{product:e.product,graph:e.graph}}),{})(j),A=a(5),P=function(e,t){e({type:"SHOW_LOADER",payload:!0})},w=function(e){e({type:"HIDE_LOADER",payload:!1})},C=a(75),x=a.n(C),M="http://34.239.168.251/:8000",L=M=M,K={sell_out_units_ytd:{stroke:"#127569",strokeWidth:2,name:"sell_out_units_ytd"},sell_out_units_ytg:{stroke:"#127569",strokeWidth:2,name:"sell_out_units_ytg"},sell_out_units_sas:{stroke:"#7FCAA3",strokeWidth:2,name:"sell_out_units_sas"},sell_out_units_scatter:{stroke:"#7FCAA3",strokeWidth:2,name:"sell_out_units_scatter"},demand_units_sas:{stroke:"#FA5391",strokeWidth:2,name:"demand_units_sas"},demand_units_ytd:{stroke:"#FDC36D",strokeWidth:2,name:"demand_units_ytd"},demand_units_ytg:{stroke:"#FDC36D",strokeWidth:2,name:"demand_units_ytg"},demand_units_scatter:{stroke:"#FDC36D",strokeWidth:2,name:"demand_units_scatter"},shipments:{stroke:"#8F8F8F",strokeWidth:2,name:"shipments"},demand_units_ly:{stroke:"#EE7470",strokeWidth:2,name:"demand_units_ly"},sell_out_units_ly:{stroke:"#65ABDE",strokeWidth:2,name:"sell_out_units_ly"}},T=[{url:"".concat(L,"/KPI/sell-out-units-LY/"),last_year:!0,helper:[{type:K.sell_out_units_ly.name,parse:"LY"}]},{url:"".concat(L,"/KPI/sell-out-units/"),last_year:!1,helper:[{type:K.sell_out_units_ytd.name,parse:"YTD"},{type:K.sell_out_units_ytg.name,parse:"YTG"}]},{url:"".concat(L,"/KPI/sell-out-units-SAS/"),last_year:!1,helper:[{type:K.sell_out_units_sas.name,parse:"YTG"}]},{url:"".concat(L,"/KPI/demand-units-LY/"),last_year:!0,helper:[{type:K.demand_units_ly.name,parse:"LY"}]},{url:"".concat(L,"/KPI/demand-units-SAS/"),last_year:!1,helper:[{type:K.demand_units_sas.name,parse:"YTG"}]},{url:"".concat(L,"/KPI/demand-units/"),last_year:!1,helper:[{type:K.demand_units_ytd.name,parse:"YTD"},{type:K.demand_units_ytg.name,parse:"YTG"}]},{url:"".concat(L,"/KPI/shipments/"),last_year:!1,helper:[{type:K.shipments.name,parse:"YTD"}]}],W=a(120),Y=a.n(W),F=a(46),R=a(163),V=a(246),H=a.n(V),B=a(247),U={loggedIn:!1},z={assortmentDialogOpen:!1,merchDetails:{},regionDetails:{}},G=function(){return"r"+Math.floor(1e7*Math.random()).toString()},q=function(e){return{Brand:e.Brand.filter((function(e){return"LEVIS"===Object.keys(e)[0]})).map((function(t){var a=G();return{name:Object.keys(t)[0],id:Object.values(t)[0],nodeId:a,displayName:Object.keys(t)[0],uniqueId:{brand:Object.keys(t)[0]},Consumer:e.Consumer.map((function(n){var r=G();return{name:Object.keys(n)[0],id:Object.values(n)[0],nodeId:r,displayName:"".concat(Object.keys(t)[0]," / ").concat(Object.keys(n)[0]),breadcrumb:[{name:Object.keys(t)[0],id:a},{name:Object.keys(n)[0],id:r}],uniqueId:{brand:Object.keys(t)[0],consumer:Object.keys(n)[0]},Category:e.Category.map((function(e){var s=G();return{name:Object.keys(e)[0],id:Object.values(e)[0],nodeId:s,breadcrumb:[{name:Object.keys(t)[0],id:a},{name:Object.keys(n)[0],id:r},{name:Object.keys(e)[0],id:s}],displayName:"".concat(Object.keys(t)[0]," / ").concat(Object.keys(n)[0]," / ").concat(Object.keys(e)[0]),uniqueId:{brand:Object.keys(t)[0],consumer:Object.keys(n)[0],category:Object.keys(e)[0]}}}))}}))}}))}},Q=function(e){return{region:e.regions.map((function(e){var t=G();return{name:e.name,id:e.name,nodeId:t,displayName:e.name,uniqueId:{region:e.name},affiliate:e.affiliates.map((function(a){var n=G();return{name:a.name,id:a.affiliate_code,nodeId:n,displayName:"".concat(e.name," / ").concat(a.name),breadcrumb:[{name:e.name,id:t},{name:a.name,id:n}],uniqueId:{region:e.name,affiliate:a.name},channels:a.channels.map((function(r){var s=G();return{name:r.name,id:r.name,nodeId:s,displayName:"".concat(e.name," / ").concat(a.name," / ").concat(r.name),breadcrumb:[{name:e.name,id:t},{name:a.name,id:n},{name:r.name,id:s}],uniqueId:{region:e.name,affiliate:a.name,channel:r.name},planning_groups:r.planning_groups.map((function(l){var i=G();return{name:Object.keys(l)[0],id:Object.values(l)[0],nodeId:i,displayName:"".concat(e.name," / ").concat(a.name," / ").concat(r.name," / ").concat(Object.keys(l)[0]),breadcrumb:[{name:e.name,id:t},{name:a.name,id:n},{name:r.name,id:s},{name:Object.keys(l)[0],planningGroupNodeId:i}],uniqueId:{region:e.name,affiliate:a.name,channel:r.name,planning_group_name:Object.keys(l)[0]}}}))}}))}}))}}))}},J={flash:{alertOpen:!1,alertMessage:"",severity:"success"},confirmBoxData:{open:!1,subject:"",body:""},showLoader:!1},X=a(34),Z=a.n(X),$=a(10),ee=a.n($),te={kpis:{sell_out_units:{name:"Sell-Out Units",selected:!0,className:"sell_out_units_ytd",style:{color:"#127569",color1:"#127569",color2:"#127569"}},sell_out_units_ly:{name:"Sell-Out Units LY",selected:!0,className:"sell_out_units_ly",style:{color:"#65ABDE",color1:"#65ABDE",color2:"#65ABDE"}},sell_out_units_sas:{name:"Sell-Out Units Plan",selected:!0,className:"sell_out_units_sas",style:{color:"#7FCAA3",color1:"#7FCAA3",color2:"#7FCAA3"}},demand_units:{name:"Demand",selected:!0,className:"demand_units_ytd",style:{color:"#FDC36D",color1:"#FDC36D",color2:"#FDC36D"}},demand_units_ly:{name:"Demand LY",selected:!0,className:"demand_units_ly",style:{color:"#EE7470",color1:"#EE7470",color2:"#EE7470"}},demand_units_sas:{name:"Demand Plan",selected:!0,className:"demand_units_sas",style:{color:"#FA5391",color1:"#FA5391",color2:"#FA5391"}},shipment:{name:"Shipments",selected:!0,className:"shipments",style:{color:"#8F8F8F",color1:"#8F8F8F",color2:"#8F8F8F"}}},showAlert:!1,filterPeriod:"year",savedProducts:[],graphDomain:["202001","202012"],selectedProductId:"",currentDate:ee()().toString(),calendarData:{}},ae=function(e,t){var a=ee.a.max(ee()().subtract(1,"year").startOf("year"),t);switch(e){case"year":return ee.a.min(ee()().endOf("year").subtract(5,"week"),a);case"season":case"quarter":return ee.a.min(ee()().endOf("year").subtract(1,"quarter"),a);case"month":return ee.a.min(ee()().endOf("year").subtract(2,"months"),a);case"week":return ee.a.min(ee()().endOf("year").subtract(5,"week").startOf("week"),a)}},ne=function(e,t){return ee()(function(e,t){return Object.entries(t.calendarData).find((function(t,a){return t[1].fiscal_month===e}))[0]}(ee()(e).startOf("month").format("YYYY0MM"),t),"YYYYWW").endOf("week")},re=function(e,t){return ee()(function(e,t){var a=Object.entries(t.calendarData),n=a.map((function(t,a){return!(String(t[1].fiscal_month)!==e||"null"===t[0])})).lastIndexOf(!0);return a[n]&&a[n][0]}(ee()(e).add(2,"month").endOf("month").format("YYYY0MM"),t),"YYYYWW").format("YYYYWW")},se=function(e,t,a){switch(e){case"year":return[ee()(t).startOf("year").format("YYYYMM"),ee()(t).endOf("year").subtract(2,"days").format("YYYYMM")];case"season":return function(e){var t=ee()(e).startOf("year");return ee()(e).quarter()<=2?[t.clone().startOf("year").format("YYYYMM"),t.clone().startOf("year").add(5,"months").format("YYYYMM")]:[t.clone().startOf("year").add(6,"months").format("YYYYMM"),t.clone().endOf("year").startOf("week").format("YYYYMM")]}(t);case"quarter":return[ae(e,ee()(t).startOf("quarter").endOf("week")).format("YYYYMM"),ee()(t).add(1,"quarter").endOf("quarter").startOf("week").format("YYYYMM")];case"month":return[ae(e,ne(t,a)).format("YYYYWW"),re(t,a)];case"week":return[ae(e,ee()(t).startOf("week")).format("YYYYWW"),(n=ee()(t).add(5,"weeks").endOf("week").format("YYYY"),("2021"===n?"2020":n)+ee()(t).add(5,"weeks").endOf("week").format("WW"))]}var n},le=function(e,t){switch(e){case"year":return ee()(t.currentDate).subtract(1,"year").startOf("year");case"season":return ee()(t.currentDate).subtract(6,"months").startOf("month");case"quarter":return ee()(t.currentDate).subtract(3,"months").startOf("month");case"month":return ee()(t.currentDate).subtract(1,"month").startOf("month");case"week":return ee()(t.currentDate).subtract(1,"week").startOf("week")}},ie=function(e,t){switch(e){case"year":return ee()(t.currentDate).add(1,"year");case"season":return ee()(t.currentDate).add(6,"months");case"quarter":return ee()(t.currentDate).add(3,"months");case"month":return ee()(t.currentDate).add(1,"month");case"week":return ee()(t.currentDate).add(1,"week").startOf("week")}},oe=function(e){var t={};return e.KPI.forEach((function(e){t[String(e.fisc_week)]={fiscal_month:String(e.fisc_month),fiscal_year:String(e.fisc_month).slice(0,4)}})),t},ce=a(27),ue=(a(60),function(e){return"2018"===e?1e3:ee()().isSame(ee()(e,"YYYY"),"year")?Number(e+"00")-52:Number(e+"00")}),de=function(e){return"2018"===e?1e3:ee()().isSame(ee()(e,"YYYY"),"year")?Number(e+"00")-12:Number(e+"00")},me={products:{},showVariables:!1,showProductAlert:!1,activeTooltipIndex:0},pe=function(e,t){return"demand_units_ytg"===e||"sell_out_units_ytg"===e?"True"===t.predicted?e:null:"demand_units_ytd"===e||"sell_out_units_ytd"===e?"False"===t.predicted?e:null:e},he=function(e,t,a,n,r,s){var l,i=function(e,t,a,n){return t[a][n].find((function(t){return t.date===e}))}(l="demand_units_ly"===a.helper[0].type||"sell_out_units_ly"===a.helper[0].type?"data"===a.granularity?String(Number(String(n.fisc_week).slice(0,4))+1)+String(n.fisc_week).slice(4,6):String(Number(String(n.fisc_month).slice(0,4))+1)+String(n.fisc_month).slice(5,7):"data"===a.granularity?String(n.fisc_week):String(n.fisc_month).slice(0,4)+String(n.fisc_month).slice(5,7),t,a.product,a.granularity);i||(i={date:l,g_index:Number(l)-_e(a,l.slice(0,4))},t[a.product][a.granularity].push(i)),s&&(i[s]=Object(A.a)(Object(A.a)({},n),{},{KPI:parseInt(n.KPI)})),pe(r,n)&&(i[pe(r,n)]=Object(A.a)(Object(A.a)({},n),{},{KPI:parseInt(n.KPI)}))},_e=function(e,t){return"weekly_data"===e.granularity?de(t):ue(t)},ye=function(e,t,a){a.helper.forEach((function(n){n.parse;var r=n.type;t[a.product].total[a.year][r]=e.total,e.KPI.forEach((function(n){he(e,t,a,n,r)}))})),function(e,t,a){if("sell_out_units_ytd"===a.helper[0].type){var n=e.KPI.filter((function(e){return"False"===e.predicted}));n.length&&he(e,t,a,n[n.length-1],"sell_out_units_ytg","sell_out_units_ytg")}if("demand_units_ytd"===a.helper[0].type){var r=e.KPI.filter((function(e){return"False"===e.predicted}));r.length&&he(e,t,a,r[r.length-1],"demand_units_ytg","demand_units_ytg")}}(e,t,a),t[a.product][a.granularity]=t[a.product][a.granularity].sort((function(e,t){return e.g_index-t.g_index}))},fe=function(e,t){var a=Z.a.all([t.products]);return a[e].selected=!0,a},ge=function(e,t){var a=Z.a.all([e.products]);return a[t.product_id].selected=!0,a},Ee=function(e){var t=Z.a.all([e.products]);return Object.entries(t).forEach((function(e){var t=Object(ce.a)(e,2);t[0];return t[1].selected=!1})),t},be=function(e,t){var a=Z.a.all([e.products]),n=a[Object.entries(a).find((function(e){var t=Object(ce.a)(e,2);t[0];return t[1].selected}))[0]][t.dataKey][e.activeTooltipIndex];return t.demand!==n.demand_units_ytg.KPI&&(n.demand_units_scatter={date:n.date,g_index:n.g_index,KPI:t.demand}),t.sellout!==n.sell_out_units_ytg.KPI&&(n.sell_out_units_scatter={date:n.date,g_index:n.g_index,KPI:t.sellout}),a},ve=Object(F.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,a=t.type;t.payload;switch(a){case"login_type":return Object(A.a)(Object(A.a)({},e),{},{loggedIn:!0});case"logout_type":return Object(A.a)(Object(A.a)({},e),{},{loggedIn:!1});default:return e}},home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SHOW_ASSORT_BROWSER":return Object(A.a)(Object(A.a)({},e),{},{assortmentDialogOpen:!0});case"HIDE_ASSORT_BROWSER":return Object(A.a)(Object(A.a)({},e),{},{assortmentDialogOpen:!1});case"UPDATE_MERCH_DATA":return Object(A.a)(Object(A.a)({},e),{},{merchDetails:q(n.data.Hierarchy)});case"UPDATE_REGION_DATA":return Object(A.a)(Object(A.a)({},e),{},{regionDetails:Q(n.data)});default:return e}},graph:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"TOGGLE_KPI":return e.kpis[n.kpi].selected=!e.kpis[n.kpi].selected,Z.a.all([e]);case"ADD_PRODUCT":var r=Z.a.all([e.savedProducts]);return r[n.product]||r.push(n),Object(A.a)(Object(A.a)({},e),{},{savedProducts:r});case"TOGGLE_ALERT":return Object(A.a)(Object(A.a)({},e),{},{showAlert:!e.showAlert});case"UPDATE_FILTER_PERIOD":return Object(A.a)(Object(A.a)({},e),{},{filterPeriod:n,currentDate:ae(n,ee()(e.currentDate)).toString(),graphDomain:se(n,ae(n,ee()(e.currentDate)),e)});case"GOTO_PREVIOUS":var s=ae(e.filterPeriod,le(e.filterPeriod,e));return Object(A.a)(Object(A.a)({},e),{},{currentDate:s.toString(),graphDomain:se(e.filterPeriod,s,e)});case"GOTO_NEXT":var l=ae(e.filterPeriod,ie(e.filterPeriod,e));return Object(A.a)(Object(A.a)({},e),{},{currentDate:l.toString(),graphDomain:se(e.filterPeriod,l,e)});case"GOTO_CURRENT":return Object(A.a)(Object(A.a)({},e),{},{currentDate:ee()().toString(),graphDomain:se(e.filterPeriod,ee()(),e)});case"UPDATE_GRAPH_DOMAIN":return Object(A.a)(Object(A.a)({},e),{},{graphDomain:se(e)});case"HANDLE_SELECTED_PRODUCT_CHANGE":return Object(A.a)(Object(A.a)({},e),{},{selectedProductId:n});case"UPDATE_CALENDAR_DATA":return Object(A.a)(Object(A.a)({},e),{},{calendarData:Z.a.all([e.calendarData,oe(n.data)])});case"REMOVE_PRODUCT":var i=Z.a.all([e.savedProducts]),o=i.findIndex((function(e){return e.product===n}));return o>-1&&i.splice(o,1),Object(A.a)(Object(A.a)({},e),{},{savedProducts:i});default:return e}},shared:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SHOW_FLASH_MESSAGE":return Object(A.a)(Object(A.a)({},e),{},{flash:{alertOpen:!0,alertMessage:n.message,severity:n.severity}});case"HIDE_FLASH_MESSAGE":return Object(A.a)(Object(A.a)({},e),{},{flash:{alertOpen:!1,alertMessage:""}});case"SHOW_CONFIRM_BOX":return Object(A.a)(Object(A.a)({},e),{},{confirmBoxData:{open:!0,subject:n.subject,body:n.body}});case"HIDE_CONFIRM_BOX":return Object(A.a)(Object(A.a)({},e),{},{confirmBoxData:{open:!1,subject:"",body:""}});case"SHOW_LOADER":return Object(A.a)(Object(A.a)({},e),{},{showLoader:!0});case"HIDE_LOADER":return Object(A.a)(Object(A.a)({},e),{},{showLoader:!1});default:return e}},product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"REMOVE_PRODUCT":var r=Z.a.all([e.products]);return delete r[n],Object(A.a)(Object(A.a)({},e),{},{products:r});case"ADD_PRODUCT":var s={};return s[n.product]={data:[],weekly_data:[],total:{2019:{},2020:{}},selected:!1,detail:{name:"Levis",category:"Category"}},Object(A.a)(Object(A.a)({},e),{},{products:Z.a.all([e.products,s])});case"SET_INITIAL_DATA":var l=Z.a.all([e.products]);return n.products.forEach((function(e){l[e.product]||(l[e.product]={data:[],weekly_data:[],total:{2019:{},2020:{}},selected:!1,detail:{name:"Levis",category:"Category"}})})),Object(A.a)(Object(A.a)({},e),{},{products:l});case"SHOW_ASSORTMENT_ALERTS":return Object(A.a)(Object(A.a)({},e),{},{products:fe(n,e),showProductAlert:!0});case"HIDE_ASSORTMENT_ALERTS":return Object(A.a)(Object(A.a)({},e),{},{products:Ee(e),showProductAlert:!1});case"SHOW_ASSORTMENT_VARIABLES":return Object(A.a)(Object(A.a)({},e),{},{products:ge(e,n),showVariables:!0,activeTooltipIndex:n.activeTooltipIndex});case"HIDE_ASSORTMENT_VARIABLES":return Object(A.a)(Object(A.a)({},e),{},{products:Ee(e),showVariables:!1,activeTooltipIndex:0});case"UPDATE_DATA":var i=Z.a.all([e.products]);return ye(n.data,i,n),Object(A.a)(Object(A.a)({},e),{},{products:i});case"UPDATE_VARIABLE_DATA":return Object(A.a)(Object(A.a)({},e),{},{products:be(e,n)});default:return e}}}),Oe={key:"pr_app",storage:H.a,whitelist:["auth","graph"]},ke=Object(R.a)(Oe,ve),Ne=Object(F.d)(ke,{},Object(F.a)(B.a)),Se=Object(R.b)(Ne),De=function(){return Ie[Ne.getState().graph.filterPeriod].granularity},je=function(){return Ie[Ne.getState().graph.filterPeriod].data},Ie={year:{granularity:"monthly",data:"weekly_data"},season:{granularity:"monthly",data:"weekly_data"},quarter:{granularity:"monthly",data:"weekly_data"},month:{granularity:"weekly",data:"data"},week:{granularity:"weekly",data:"data"}},Ae=Ie,Pe=function(e){return function(t,a){var n=a();t({type:"ADD_PRODUCT",payload:{product:JSON.stringify(e.assortment),displayName:e.displayName,locationDisplayName:e.locationDisplayName}}),xe(n,t,JSON.stringify(e.assortment),e.displayName)}},we=function(e,t){var a=Y()(Ne.getState,"graph.filterPeriod");Ne.subscribe(a((function(t,a,n){Ce(Ne.getState(),e)})))},Ce=function(e,t){Me(2019,De(),e,t),Me(2020,De(),e,t)},xe=function(e,t,a,n){var r=e.graph.graphDomain[0].slice(0,4),s=e.graph.graphDomain[1].slice(0,4);r===ee()().subtract(1,"year").format("YYYY")&&Le(r,e,t,a,n),s===ee()().format("YYYY")&&Le(s,e,t,a,n)},Me=function(e,t,a,n){a.graph.savedProducts.forEach((function(t){Le(e,a,n,t.product,t.displayName)}))},Le=function(e,t,a,n,r){T.forEach((function(t){if((String(e)===String(2019)||"weekly"===De())&&t.url.includes("SAS"))return null;P(a),x.a.get(t.url,{params:Object(A.a)({year:t.last_year?e-1:e,time_granularity:De()},JSON.parse(n))}).then((function(r){a({type:"UPDATE_CALENDAR_DATA",payload:{data:r.data}}),a({type:"UPDATE_DATA",payload:{data:r.data,helper:t.helper,product:n,year:e,granularity:je()}}),w(a)}))}))},Ke=function(e){return function(t,a){a();P(t),x.a.get("".concat(L,"/Master_Static_Info/merchandise-hierarchy-structure/"),{params:e}).then((function(e){t({type:"UPDATE_MERCH_DATA",payload:{data:e.data}}),w(t)}))}},Te=function(e,t){P(t),x.a.get("".concat(L,"/Master_Static_Info/location-hierarchy-structure/")).then((function(e){t({type:"UPDATE_REGION_DATA",payload:{data:e.data}}),w(t)}))},We=function(e,t){P(t),x.a.get("".concat(L,"/KPI/demand-units-LY/"),{params:{year:2019,time_granularity:"weekly",region:"LSA",brand:"LEVIS"}}).then((function(e){t({type:"UPDATE_CALENDAR_DATA",payload:{data:e.data}}),w(t)}))},Ye=function(e,t){return{type:"SHOW_FLASH_MESSAGE",payload:{message:e,severity:t}}},Fe=function(){return{type:"SHOW_ASSORT_BROWSER",payload:!0}},Re=(a(501),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleOnMerchSelection=function(e){n.props.addProduct({assortment:e.key,locationDisplayName:e.locationDisplayName,displayName:e.displayName}),n.props.showFlashMessage("Assortment successfully added","success")},n.state={productsList:[{locations:[{displayName:"LSA",key:"lsa"}],merchs:[{displayName:"LEVIS",key:"levis"},{displayName:"WOMENS",key:"WOMENS"}],key:{region:"LSA",brand:"LEVIS",consumer:"WOMENS"},locationDisplayName:"LSA",displayName:"LSA Levi\u2019s Womens",uniqueId:1,visible:!1},{locations:[{displayName:"LSA",key:"lsa"}],merchs:[{displayName:"LEVIS",key:"levis"},{displayName:"MENS",key:"MENS"}],key:{region:"LSA",brand:"LEVIS",consumer:"MENS"},locationDisplayName:"LSA",displayName:"LSA Levi\u2019s Mens",uniqueId:2,visible:!1},{locations:[{displayName:"LSE",key:"lse"}],merchs:[{displayName:"LEVIS",key:"levis"},{displayName:"MENS",key:"MENS"}],key:{region:"LSE",brand:"LEVIS",consumer:"MENS"},locationDisplayName:"LSE",displayName:"LSE Levi\u2019s Mens",uniqueId:3,visible:!1},{locations:[{displayName:"LSE",key:"lse"}],merchs:[{displayName:"LEVIS",key:"levis"},{displayName:"WOMENS",key:"WOMENS"}],key:{region:"LSE",brand:"LEVIS",consumer:"WOMENS"},locationDisplayName:"LSE",displayName:"LSE Levi\u2019s Womens",uniqueId:1,visible:!1},{locations:[{displayName:"AMA",key:"ama"}],merchs:[{displayName:"LEVIS",key:"levis"},{displayName:"MENS",key:"MENS"}],key:{region:"AMA",brand:"LEVIS",consumer:"MENS"},locationDisplayName:"AMA",displayName:"AMA Levi\u2019s Mens",uniqueId:3,visible:!1},{locations:[{displayName:"AMA",key:"ama"}],merchs:[{displayName:"LEVIS",key:"levis"},{displayName:"WOMENS",key:"WOMENS"}],key:{region:"AMA",brand:"LEVIS",consumer:"WOMENS"},locationDisplayName:"AMA",displayName:"AMA Levi\u2019s Womens",uniqueId:1,visible:!1}]},n}return Object(u.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=Z.a.all([this.state.productsList]),a=e.graph.savedProducts.map((function(e){return e.locationDisplayName})),n=e.graph.savedProducts.map((function(e){return e.displayName}));t.forEach((function(e){n.includes(e.displayName)&&a.includes(e.locationDisplayName)?e.visible=!1:e.visible=!0})),this.setState({productsList:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"recommended-products"},this.state.productsList.find((function(e){return e.visible}))&&r.a.createElement("div",null,r.a.createElement(_.a,{variant:"h3"}," Quick Add Merchandise & Location Views "),r.a.createElement("div",{className:"products-list"},this.state.productsList.map((function(t){return r.a.createElement(r.a.Fragment,null,t.visible&&r.a.createElement("div",{className:"product-list",key:t.uniqueId,onClick:function(){return e.handleOnMerchSelection(t)}},r.a.createElement("div",{className:"m-r-10"},"LSA"===t.key.region&&r.a.createElement("img",{src:"images/lsa-globe.svg",alt:"group"}),"LSE"===t.key.region&&r.a.createElement("img",{src:"images/lse-globe.svg",alt:"group"}),"AMA"===t.key.region&&r.a.createElement("img",{src:"images/ama-globe.svg",alt:"group"})),r.a.createElement("div",{className:"merchandise-value d-flex"},r.a.createElement("ul",{className:""},r.a.createElement(_.a,{variant:"h5"},"Location"),t.locations.map((function(e){return r.a.createElement("li",{className:"loc-result",key:e.key},e.displayName)}))),r.a.createElement("ul",null,r.a.createElement(_.a,{variant:"h6"},"Merchandise"),t.merchs.map((function(e){return r.a.createElement("li",{className:"loc-result",key:e.key},e.displayName)}))))))})))))}}]),a}(n.Component)),Ve=Object(i.b)((function(e,t){return{home:e.home,graph:e.graph}}),{getMerchData:Ke,addProduct:Pe,showFlashMessage:Ye})(Re),He="sawan@vinsol.com",Be="qwqwqwqw",Ue=(a(502),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"navbar shadow"},r.a.createElement(p.b,{to:"/dashboard",className:"home"},r.a.createElement("img",{className:"full-width",alt:"home",src:"/images/levis-logo.png"})),r.a.createElement(p.b,{to:"/dashboard",className:"links dashboard active"},r.a.createElement("span",null,"dashboard")),r.a.createElement(p.b,{to:"/",className:"links exit",onClick:function(){return e.props.logOutUser()}},r.a.createElement("span",null,"exit")))}}]),a}(n.Component)),ze=Object(i.b)((function(e,t){return{}}),{logOutUser:function(){return{type:"logout_type",payload:!1}}})(Ue),Ge=a(563),qe=a(255),Qe=a.n(qe),Je=a(256),Xe=a.n(Je),Ze=a(551),$e=a(573),et=a(555),tt=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(Ze.a,{variant:"filled"},r.a.createElement($e.a,{labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",value:this.props.graph.filterPeriod,onChange:function(t,a){return e.props.updateFilterPeriod(a.props.value)}},r.a.createElement(et.a,{value:"year"},"YEAR"),r.a.createElement(et.a,{value:"season"},"HALF"),r.a.createElement(et.a,{value:"quarter"},"QUARTER"),r.a.createElement(et.a,{value:"month"},"MONTH"),r.a.createElement(et.a,{value:"week"},"WEEK")))}}]),a}(n.Component),at=Object(i.b)((function(e,t){return{graph:e.graph}}),{updateFilterPeriod:function(e){return{type:"UPDATE_FILTER_PERIOD",payload:e}}})(tt),nt=function(e){var t=Object.keys(K).find((function(t){return e[t]}));return e[t]},rt=function(e){var t=null;return Object.values(Ne.getState().product.products).forEach((function(a){t=a.data.find((function(t){return t.date===e}))})),t&&nt(t)},st=function(e){return" "+e.slice(0,4)},lt=function(e){var t;return"weekly"===De()?(t=e-ue(e.slice(0,4)))>52?t-52:t:(t=e-de(e.slice(0,4)))>12?t-12:t},it=function(e,t){switch(t){case"year":return e[0].slice(0,4);case"season":return a=e[0],(1===lt(a)?"H1":7===lt(a)?"H2":"")+st(e[0]);case"quarter":return function(e){return 12===lt(e)||1===lt(e)?"Q1":4===lt(e)?"Q2":7===lt(e)?"Q3":10===lt(e)?"Q4":""}(e[0])+st(e[0])+" - "+function(e){return 3===lt(e)?"Q1":6===lt(e)?"Q2":9===lt(e)?"Q3":12===lt(e)?"Q4":""}(e[1])+st(e[1]);case"month":return rt(e[0])&&rt(e[1])?rt(e[0]).fisc_month_name+" "+String(rt(e[0]).fisc_month).slice(0,4)+" - "+rt(e[1]).fisc_month_name+" "+String(rt(e[1]).fisc_month).slice(0,4):"";case"week":return"FW"+e[0].slice(4,6)+st(e[0])+" - FW"+e[1].slice(4,6)+st(e[1])}var a},ot=function(){return"weekly"===De()?Number(ee()().format("WW"))+52:Number(ee()().format("MM"))+12},ct=a(578),ut=a(557),dt=a(516),mt=a(559),pt=a(556),ht=a(558),_t=(a(504),function(e){return e[je()].filter((function(e){return!!(e.sell_out_units_ytg&&e.sell_out_units_ytg.KPI&&e.sell_out_units_sas&&e.sell_out_units_sas.KPI&&k(e.sell_out_units_ytg.KPI,e.sell_out_units_sas.KPI))||!!(e.demand_units_ytg&&e.demand_units_ytg.KPI&&e.demand_units_sas&&e.demand_units_sas.KPI&&k(e.demand_units_ytg.KPI,e.demand_units_sas.KPI))}))}),yt=function(e){var t=Ne.getState().graph.savedProducts.find((function(t){return t.product===e}));return JSON.parse(t.product)},ft=function(e){var t=Ne.getState().graph.savedProducts.find((function(t){return t.product===e})),a=JSON.parse(t.product);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"prod-region"},r.a.createElement("span",{className:"heading"},"Location"),r.a.createElement("span",{className:"bold"}," ",a.region," "),a.affiliate&&r.a.createElement("span",null," ",a.affiliate," "),a.channel&&r.a.createElement("span",null," ",a.channel," "),a.planning_group_name&&r.a.createElement("span",null," ",a.planning_group_name," ")),r.a.createElement("div",{className:"prod-brand"},r.a.createElement("span",{className:"heading"},"Merchandise"),r.a.createElement("span",{className:"bold"}," ",a.brand," "),a.consumer&&r.a.createElement("span",null," ",a.consumer," "),a.category&&r.a.createElement("span",null," ",a.category," ")))},gt=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"getPointName",value:function(e){return"weekly"===De()?e.slice(4,6):ee()(e.slice(4,6),"MM").format("MMMM")}},{key:"getSellOutAlertText",value:function(e){return e.sell_out_units_ytg&&e.sell_out_units_ytg.KPI&&e.sell_out_units_sas&&e.sell_out_units_sas.KPI&&k(e.sell_out_units_ytg.KPI,e.sell_out_units_sas.KPI)?E(e.sell_out_units_ytg.KPI,e.sell_out_units_sas.KPI)>0?"Sell-Out Units Prediction exceeds Sell-Out Plan By : "+b(e.sell_out_units_ytg.KPI,e.sell_out_units_sas.KPI)+"%":"Sell-Out Units Prediction is less than Sell-Out Plan By : "+b(e.sell_out_units_ytg.KPI,e.sell_out_units_sas.KPI)+"%":""}},{key:"getDemandAlertText",value:function(e){return e.demand_units_ytg&&e.demand_units_ytg.KPI&&e.demand_units_sas&&e.demand_units_sas.KPI&&k(e.demand_units_ytg.KPI,e.demand_units_sas.KPI)?E(e.demand_units_ytg.KPI,e.demand_units_sas.KPI)>0?"Demand Prediction exceeds Demand Plan By : "+b(e.demand_units_ytg.KPI,e.demand_units_sas.KPI)+"%":"Demand Prediction is less than Demand Plan By : "+b(e.demand_units_ytg.KPI,e.demand_units_sas.KPI)+"%":""}},{key:"assortmentNotifications",value:function(e){var t=this;return r.a.createElement("ul",{className:"paper notifications simple"},r.a.createElement(_.a,{variant:"h3"},r.a.createElement(pt.a,null),"Alerts"),_t(e)&&_t(e).length?_t(e).map((function(e,a){return r.a.createElement("li",{key:a},r.a.createElement("div",null,"Year ",e.date.slice(0,4)," - ","weekly"===De()?"Week":"Month"," ",t.getPointName(e.date),r.a.createElement(_.a,null,t.getSellOutAlertText(e)),r.a.createElement(_.a,null,t.getDemandAlertText(e))))})):r.a.createElement("li",null,r.a.createElement(_.a,null,"No alerts")))}},{key:"handleClose",value:function(){this.props.hideAssortmentAlerts()}},{key:"render",value:function(){var e=this,t=this.props.selectedAssortment&&this.props.selectedAssortment[1]||{};return r.a.createElement(ct.a,{"aria-labelledby":"dialog-title",open:this.props.showProductAlert,className:"assortment-details-dialog category-title dialog alert-dialog-modal",maxWidth:"md"},this.props.showProductAlert&&r.a.createElement(ut.a,{id:"dialog-title"},r.a.createElement("div",{className:"dialog-sec merchandise-val"},ft(this.props.selectedAssortment[0])),r.a.createElement(dt.a,{size:"small",onClick:function(){return e.handleClose()}},r.a.createElement(ht.a,null))),this.props.showProductAlert&&r.a.createElement(mt.a,null,r.a.createElement("div",{className:""},this.assortmentNotifications(t))))}}]),a}(n.Component),Et=Object(i.b)((function(e,t){return{selectedAssortment:Object.entries(e.product.products).find((function(e){var t=Object(ce.a)(e,2);t[0];return t[1].selected})),showProductAlert:e.product.showProductAlert}}),{hideAssortmentAlerts:function(){return{type:"HIDE_ASSORTMENT_ALERTS",payload:!1}}})(gt),bt=a(560),vt=a(577);function Ot(e){return r.a.createElement("svg",{width:e.size||"32",height:e.size||"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("rect",{x:"1",y:"1",width:"30",height:"30",rx:"1",stroke:e.color,strokeWidth:"2"}))}function kt(e){return r.a.createElement("svg",{className:"filled-icon",width:e.size,height:e.size,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.2273 9.52275L17.9091 16.2046L32 2.11366V2C32 0.895431 31.1046 0 30 0H2C0.895431 0 0 0.895431 0 2V30C0 31.1046 0.895431 32 2 32H30C31.1046 32 32 31.1046 32 30V6.5682L17.9091 20.6591L9 11.75L11.2273 9.52275Z",fill:"url(#paint"+e.index+"_linear)"}),r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"paint"+e.index+"_linear",x1:"32",y1:"-21",x2:"0",y2:"43",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{stopColor:e.color1}),r.a.createElement("stop",{offset:"1",stopColor:e.color2}))))}var Nt=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(bt.a,{control:r.a.createElement(vt.a,{checked:this.props.graph.showAlert,onChange:function(){return e.props.toggleAlert()},name:"toggleAlert",icon:r.a.createElement(Ot,{size:"14px",color:"#FF0000",index:354}),checkedIcon:r.a.createElement(kt,{size:"14px",color1:"#FF0000",color2:"#740505",index:354})}),label:"Show Alerts"})}}]),a}(n.Component),St=Object(i.b)((function(e,t){return{graph:e.graph}}),{toggleAlert:function(){return{type:"TOGGLE_ALERT",payload:!1}}})(Nt),Dt=function(e){return"weekly"===De()?e>52?e-52:e:e>12?e-12:e},jt=function(e){if("weekly"===De()){var t=Object.values(Ne.getState().product.products)[0][je()].find((function(t){return t.g_index===e}));return t&&nt(t)?"FW "+String(nt(t).fisc_week).slice(4,6):""}var a=Object.values(Ne.getState().product.products)[0][je()].find((function(t){return t.g_index===e}));return a&&nt(a)?nt(a).fisc_month_name:""},It=function(e,t,a){return a?e+wt(t):e},At=function(e,t){return 1===Dt(e)?It("H1",e,t):7===Dt(e)?It("H2",e,t):""},Pt=function(e,t){return 1===Dt(e)?It("Q1",e,t):4===Dt(e)?It("Q2",e,t):7===Dt(e)?It("Q3",e,t):10===Dt(e)?It("Q4",e,t):""},wt=function(e){var t=Ne.getState().product.products;return t&&Object.values(t).length&&Object.values(t)[0][je()].length&&Object.values(t)[0][je()].find((function(t){return t.g_index===e}))?(" "+Object.values(t)[0][je()].find((function(t){return t.g_index===e})).date).slice(0,5):""},Ct=function(e){var t=Object.values(Ne.getState().product.products)[0][je()].find((function(t){return t.g_index===e}));if(!t)return"";var a=nt(t);if(!a)return"";switch(Ne.getState().graph.filterPeriod){case"year":return"";case"season":return At(e,!0);case"quarter":return Pt(e,!0);case"month":case"week":return xt(e,a,!0)}return At(e)},xt=function(e,t,a){var n=e>52?e-52:e,r=ee()(n,"WW"),s=Ne.getState().graph.calendarData[r.format("YYYYWW")];return s&&function(e){var t=Object.entries(Ne.getState().graph.calendarData).find((function(t,a){return t[1].fiscal_month===e}));return t&&t[0]}(s.fiscal_month)===r.format("YYYYWW")?a?t.fisc_month_name+" "+String(t.fisc_week).slice(0,4):t.fisc_month_name:""},Mt=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).customizedTick=function(e){var t=e.x,a=e.y,n=(e.stroke,e.payload);return r.a.createElement("g",{transform:"translate(".concat(t,",").concat(a,")")},r.a.createElement("text",{x:70,y:0,dy:20,fontSize:"12px",textAnchor:"end"},Ct(n.value)))},e.customizedWeekTick=function(e){var t=e.x,a=e.y,n=(e.stroke,e.payload);return r.a.createElement("g",{transform:"translate(".concat(t,",").concat(a,")")},r.a.createElement("text",{x:40,y:0,dy:20,fontSize:"12px",textAnchor:"end"},jt(n.value)))},e}return Object(u.a)(a,[{key:"getMaxWeek",value:function(e){return"weekly"===De()?this.props.graph.graphDomain[1]-ue(this.props.graph.graphDomain[1].slice(0,4)):this.props.graph.graphDomain[1]-de(this.props.graph.graphDomain[1].slice(0,4))}},{key:"getMinWeek",value:function(e){return"weekly"===De()?this.props.graph.graphDomain[0]-ue(this.props.graph.graphDomain[0].slice(0,4)):this.props.graph.graphDomain[0]-de(this.props.graph.graphDomain[0].slice(0,4))}},{key:"getTickCount",value:function(){return"weekly"===De()?this.props.graph.graphDomain[1]-ue(this.props.graph.graphDomain[1].slice(0,4))-(this.props.graph.graphDomain[0]-ue(this.props.graph.graphDomain[0].slice(0,4))-1):this.props.graph.graphDomain[1]-de(this.props.graph.graphDomain[1].slice(0,4))-(this.props.graph.graphDomain[0]-de(this.props.graph.graphDomain[0].slice(0,4))-1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.theme,s=t.now;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"legend year chart-head",key:"legend-year"},r.a.createElement("span",{className:"alert-sec"},r.a.createElement(St,null)),r.a.createElement(D.i,{className:"graph"},r.a.createElement(D.g,{data:a,margin:{top:0,right:45,left:66,bottom:0}},r.a.createElement(D.l,{dataKey:"g_index",type:"number",domain:[function(t){return e.getMinWeek(t)},function(t){return e.getMaxWeek(t)}],tickFormatter:function(e){return Ct(e)},tickCount:this.getTickCount(),orientation:"top",tickLine:!0,hide:!1,fontSize:"12px",mirror:!1,dx:20,stroke:"#d4d4d4",tick:function(t){return e.customizedTick(t)},tickSize:20}),r.a.createElement(D.m,{hide:!0}),r.a.createElement(D.c,{horizontal:!0}),r.a.createElement(D.h,{x:s,stroke:n.colorRef,strokeWidth:n.strokeWidth})))),r.a.createElement("li",{className:"legend month",key:"legend-month"},r.a.createElement(D.i,{className:"graph"},r.a.createElement(D.g,{data:a,margin:{top:0,right:45,left:50,bottom:0}},r.a.createElement(D.l,{dataKey:"g_index",type:"number",domain:[function(t){return e.getMinWeek(t)},function(t){return e.getMaxWeek(t)}],tickFormatter:function(e){return jt(e)},tickCount:this.getTickCount(),orientation:"top",tick:function(t){return e.customizedWeekTick(t)},tickLine:!1,hide:!1,fontSize:"12px",dx:20,tickSize:0}),r.a.createElement(D.m,{hide:!0}),r.a.createElement(D.c,{horizontal:!1}),r.a.createElement(D.h,{x:s,stroke:n.colorRef,strokeWidth:n.strokeWidth})))))}}]),a}(n.Component),Lt=Object(i.b)((function(e,t){return{graph:e.graph}}),{})(Mt),Kt=a(249),Tt=a(562),Wt=a(561),Yt=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"handleClose",value:function(){this.props.hideConfirmBox(),this.props.onSave()}},{key:"handleCancel",value:function(){this.props.hideConfirmBox(),this.props.onCancel()}},{key:"render",value:function(){var e=this,t=this.props.shared.confirmBoxData;return r.a.createElement(ct.a,{open:t.open,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",className:"cu-confirm-box"},r.a.createElement(ut.a,{id:"alert-dialog-title"},t.subject),r.a.createElement(mt.a,null,r.a.createElement(Wt.a,{id:"alert-dialog-description"},t.body)),r.a.createElement(Tt.a,null,r.a.createElement(Ge.a,{variant:"contained",onClick:function(){return e.handleCancel()},color:"primary"},"Cancel"),r.a.createElement(Ge.a,{className:"theme-button",variant:"contained",onClick:function(){return e.handleClose()},autoFocus:!0},"Ok")))}}]),a}(n.Component),Ft=Object(i.b)((function(e,t){return{shared:e.shared}}),{hideConfirmBox:function(){return{type:"HIDE_CONFIRM_BOX",payload:!1}}})(Yt),Rt=a(161),Vt=(a(505),function(e){e.payload,e.x;var t=e.y,a=e.value;return console.log(a),r.a.createElement("text",{x:27,y:t,dy:125*a,"font-size":"10px",offset:"5",class:"recharts-text recharts-label","text-anchor":"middle"},r.a.createElement("tspan",null,100*a))}),Ht=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={demand:0,sellout:0,colors:{}},n}return Object(u.a)(a,[{key:"demandData",value:function(e){var t=e.selectedAssortment&&e.selectedAssortment[1]||{},a=e.product.activeTooltipIndex;return Number((t[je()][a].demand_units_scatter||t[je()][a].demand_units_ytg||t[je()][a].demand_units_ytd).KPI)}},{key:"selloutData",value:function(e){var t=e.selectedAssortment&&e.selectedAssortment[1]||{},a=e.product.activeTooltipIndex;return Number((t[je()][a].sell_out_units_scatter||t[je()][a].sell_out_units_ytg||t[je()][a].sell_out_units_ytd).KPI)}},{key:"componentWillReceiveProps",value:function(e,t){var a=e.selectedAssortment&&e.selectedAssortment[1]||{},n=e.product.activeTooltipIndex;e.product.showVariables&&a[je()]&&a[je()][n]&&!this.state.demand&&this.setState({demand:this.demandData(e),sellout:this.selloutData(e)})}},{key:"showAlert",value:function(){this.props.showConfirmBox("Please Confirm!","Are you sure, you want to override the prediction?")}},{key:"handleSave",value:function(){this.props.updateVariableData({demand:this.state.demand,sellout:this.state.sellout}),this.handleClose()}},{key:"handleClose",value:function(){this.setState({demand:0,sellout:0,colors:[]}),this.props.hideAssortmentVariables()}},{key:"updateDemand",value:function(e){e.formattedValue;var t=e.value;t>0&&this.setState({demand:t})}},{key:"updateSellout",value:function(e){e.formattedValue;var t=e.value;t>0&&this.setState({sellout:t})}},{key:"getPointName",value:function(e,t){if(!e)return"";var a=e[je()][t].sell_out_units_ytg||e[je()][t].sell_out_units_ytd;return"weekly"===De()?"".concat(a.fisc_year," FISCAL WEEK ").concat(String(a.fisc_week).slice(4,6)):"".concat(a.fisc_year," ").concat(a.fisc_month_name)}},{key:"isHistorical",value:function(e,t){return e?e[je()][t].g_index<=Number(ot()):""}},{key:"getHistoricalLabel",value:function(e,t){return e?e[je()][t].g_index<=Number(ot())?"Historical Values":"Predicted Values":""}},{key:"getDemandPieData",value:function(){return this.getPieData("demand_units_ytd")||this.getPieData("demand_units_ytg")}},{key:"getSellOutPieData",value:function(){return this.getPieData("sell_out_units_ytd")||this.getPieData("sell_out_units_ytg")}},{key:"getPieData",value:function(e){var t=this.props.selectedAssortment&&this.props.selectedAssortment[1];if(t&&t[je()][this.props.product.activeTooltipIndex][e]){var a=[],n=t[je()][this.props.product.activeTooltipIndex][e].variable_importance;return Object.keys(n).forEach((function(e){Number(n[e])>0&&(a[e]=n[e])})),this.setColors(a),a}return[]}},{key:"setColors",value:function(e){var t=this;Object.keys(e).forEach((function(e){if(!t.state.colors[e]){var a={};a[e]=Object(Kt.randomColor)(),t.setState({colors:Object(A.a)(Object(A.a)({},t.state.colors),a)})}}))}},{key:"render",value:function(){var e=this,t=this.props.selectedAssortment&&this.props.selectedAssortment[1]||{},a=this.props.selectedAssortment&&JSON.parse(this.props.selectedAssortment[0]),n=this.props.product,s=n.showVariables,l=n.activeTooltipIndex;return r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(ct.a,{"aria-labelledby":"dialog-title",open:s,className:"assortment-graph-dialog dialog dialog-modal"},r.a.createElement(ut.a,{id:"dialog-title"},r.a.createElement(dt.a,{size:"small",onClick:function(){return e.handleClose()}},r.a.createElement(ht.a,null))),r.a.createElement(mt.a,null,r.a.createElement("div",{className:""},r.a.createElement("div",{className:"graph modal-graph"},r.a.createElement(_.a,{variant:"h2"},this.getPointName(t,l)),r.a.createElement("div",null,this.props.selectedAssortment&&r.a.createElement("div",{className:"merchandise-val"},r.a.createElement(r.a.Fragment,null,ft(this.props.selectedAssortment[0])))),r.a.createElement("div",{className:"chart-modal-val align-center d-flex"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"vertical-sec"},r.a.createElement(_.a,null,"100%"),r.a.createElement(_.a,null,"50%"),r.a.createElement(_.a,null,"0%")),r.a.createElement("div",{className:"chart-modal"},t[je()]&&r.a.createElement(D.b,{width:90,height:240,data:[this.getDemandPieData()],margin:{top:5,right:30,left:0,bottom:5}},Object.keys(this.getDemandPieData()).map((function(t){return r.a.createElement(D.a,{isAnimationActive:!1,barSize:45,key:t,stackId:"demand",dataKey:t,fill:e.state.colors[t]},r.a.createElement(D.e,{dataKey:t,position:"center",content:Vt}))}))),r.a.createElement("span",{className:"chart-label"},"Sell-Out")),r.a.createElement("div",{className:"chart-modal"},t[je()]&&r.a.createElement(D.b,{width:90,height:240,data:[this.getSellOutPieData()],margin:{top:5,right:30,left:0,bottom:5}},Object.keys(this.getSellOutPieData()).map((function(t){return r.a.createElement(D.a,{isAnimationActive:!1,barSize:45,key:t,stackId:"sell_out_units",dataKey:t,fill:e.state.colors[t]},r.a.createElement(D.e,{position:"center",dataKey:t,content:Vt}))}))),r.a.createElement("span",{className:"chart-label"},"Demand")),r.a.createElement("div",{className:"color-state"},Object.keys(this.state.colors).map((function(t){return r.a.createElement("div",{className:"m-b-10 d-flex align-center",style:{color:e.state.colors[t]},key:t},r.a.createElement("span",{style:{background:e.state.colors[t]},key:t}),r.a.createElement(_.a,null,t))})))),r.a.createElement("div",{className:"chart-fileds"},t[je()]&&t[je()][l]&&r.a.createElement("ul",null,r.a.createElement("li",{className:"labels m-b-15-hard"},r.a.createElement(_.a,{variant:"h3"},"Sell-Out"),r.a.createElement(_.a,{variant:"h3"},"Demand")),r.a.createElement("li",{className:"p-b-0-hard"},r.a.createElement(_.a,{variant:"h6"},this.getHistoricalLabel(t,l)),r.a.createElement(_.a,{variant:"h6"},this.getHistoricalLabel(t,l))),r.a.createElement("li",{className:"no-editable"},r.a.createElement("input",{name:"graph-sellout-original",id:"graph-sellout-original",readOnly:!0,value:Number((t[je()][l].sell_out_units_ytg||t[je()][l].sell_out_units_ytd).KPI).toLocaleString()}),r.a.createElement("input",{name:"graph-demand-original",id:"graph-demand-original",readOnly:!0,value:Number((t[je()][l].demand_units_ytg||t[je()][l].demand_units_ytd).KPI).toLocaleString()})),a.planning_group_name&&a.category&&!this.isHistorical(t,l)&&r.a.createElement("div",null,r.a.createElement("li",{className:"p-b-0-hard"},r.a.createElement(_.a,{variant:"h6"},"My Adjustments"),r.a.createElement(_.a,{variant:"h6"},"My Adjustments")),r.a.createElement("li",{className:"p-t-0"},r.a.createElement(Rt.a,{value:this.state.sellout,onValueChange:function(t){return e.updateSellout(t)},allowNegative:!1,thousandSeparator:!0}),r.a.createElement(Rt.a,{value:this.state.demand,onValueChange:function(t){return e.updateDemand(t)},allowNegative:!1,thousandSeparator:!0})))),r.a.createElement(Tt.a,null,a.planning_group_name&&a.category&&!this.isHistorical(t,l)&&r.a.createElement(Ge.a,{autoFocus:!0,onClick:function(){return e.showAlert()},color:"primary"},"Save")))))))),r.a.createElement(Ft,{onSave:function(){return e.handleSave()},onCancel:function(){return e.handleClose()}}))}}]),a}(n.Component),Bt=Object(i.b)((function(e,t){return{product:e.product,selectedAssortment:Object.entries(e.product.products).find((function(e){var t=Object(ce.a)(e,2);t[0];return t[1].selected}))}}),{showConfirmBox:function(e,t){return{type:"SHOW_CONFIRM_BOX",payload:{body:t,subject:e}}},hideAssortmentVariables:function(){return{type:"HIDE_ASSORTMENT_VARIABLES",payload:!1}},updateVariableData:function(e){var t=e.demand,a=e.sellout;return function(e,n){var r=n();P(e);var s=r.product.products,l=Object.entries(s).find((function(e){var t=Object(ce.a)(e,2);t[0];return t[1].selected}))[0],i=s[l][je()][r.product.activeTooltipIndex];x.a.post("".concat(L,"/KPI/overriding-input/"),{selected_merchandise_combination:Object(A.a)({},JSON.parse(l)),override_value:{adjusted_demand:Number(t),sell_out:Number(a)},user:He,selected_period:i.date}),e({type:"UPDATE_VARIABLE_DATA",payload:{demand:t,sellout:a,dataKey:je()}}),w(e)}}})(Ht),Ut=a(564),zt=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.graph_kpis;return r.a.createElement(Ut.a,{container:!0,spacing:1},Object.keys(t).map((function(a,n){var s=t[a];return r.a.createElement("div",{className:"p-r-15",key:a},r.a.createElement(bt.a,{control:r.a.createElement(vt.a,{color:"default",icon:r.a.createElement(Ot,{color:s.style.color,index:n}),checkedIcon:r.a.createElement(kt,{size:"32px",color1:s.style.color1,color2:s.style.color2,index:n}),checked:s.selected,onChange:function(){return e.props.toggleKPI(a)}}),label:s.name}))})))}}]),a}(n.Component),Gt=Object(i.b)((function(e,t){return{graph_kpis:e.graph.kpis}}),{toggleKPI:function(e){return{type:"TOGGLE_KPI",payload:{kpi:e}}}})(zt),qt=(a(258),a(552)),Qt=a(554),Jt=a(515),Xt=a(565),Zt=a(566),$t=(a(572),a(581)),ea=a(567),ta=a(568),aa=a(128),na=a.n(aa),ra=a(250),sa=a(162),la=a.n(sa),ia=(a(506),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){n.setState({expanded:t})},n.handleOnSelection=function(e,t,a){n.setState({regionJson:e,step:1,productResult:[],expanded:[],productBreadcrumb:[],breadcrumb:[],node:a}),n.props.getMerchData(e),t.stopPropagation()},n.handleOnMerchSelection=function(e,t,a){n.props.addProduct({assortment:Object(A.a)(Object(A.a)({},n.state.regionJson),e),locationDisplayName:n.state.node.displayName,displayName:a}),n.setState({regionJson:{},step:0}),n.props.showFlashMessage("Assortment successfully added","success"),n.handleClose(),t.stopPropagation()},n.treeViewLabel=function(e){return r.a.createElement("div",{key:e.id},e.name,r.a.createElement(dt.a,{edge:"end","aria-label":"add",onClick:function(t){return n.handleOnSelection(e.uniqueId,t,e)}},e.displayName===n.state.node.displayName&&r.a.createElement(ra.CheckBoxIcon,{size:"24",color1:"#008000",color2:"#0C580C",index:20}),e.displayName!==n.state.node.displayName&&r.a.createElement(na.a,{className:"check-product"})))},n.treeViewMerchLabel=function(e){return r.a.createElement("div",{key:e.id},e.name,r.a.createElement(dt.a,{edge:"end","aria-label":"add",onClick:function(t){return n.handleOnMerchSelection(e.uniqueId,t,e.displayName)}},r.a.createElement(na.a,{className:"check-product"})))},n.getObjects=function(e,t,a){var r=[];for(var s in e)e.hasOwnProperty(s)&&("object"===typeof e[s]?r=r.concat(n.getObjects(e[s],t,a)):(s===t&&e[s].toLocaleLowerCase().includes(a.toLocaleLowerCase())||s===t&&""===a||e[s]===a&&""===t&&-1===r.lastIndexOf(e))&&r.push(e));return r},n.handleProductBreadCrumbChange=function(e){e.breadcrumb&&n.setState({productBreadcrumb:e.breadcrumb})},n.findProductCategories=function(e,t){var a=0===n.state.step?n.props.home.regionDetails:n.props.home.merchDetails;e.target.value?n.setState({productResult:n.getObjects(a,"name",e.target.value)}):n.setState({productResult:[]})},n.findProducts=function(e,t){e.target.value?n.setState({productResult:n.getObjects(n.props.home.regionDetails,"name",e.target.value)}):n.setState({productResult:[]})},n.gotoSelectedProductBreadCrumb=function(e){document.querySelector("#".concat(e.id))&&document.querySelector("#".concat(e.id)).scrollIntoView()},n.state={expanded:[],node:{},productResult:[],result:[],value:0,productBreadcrumb:[],breadcrumb:[],step:0,regionJson:{}},n}return Object(u.a)(a,[{key:"handleClose",value:function(){this.setState({productResult:[],step:0,expanded:[],productBreadcrumb:[],breadcrumb:[],node:{}}),this.props.onClose()}},{key:"render",value:function(){var e=this,t={},a=this.state,n=a.expanded,s=a.productResult,l=a.step,i=this.props.home;return r.a.createElement("div",{className:"sidebar-product"},r.a.createElement("div",{className:"tab-block"},r.a.createElement("span",{className:0===l?"active":"",onClick:function(t){return e.setState({step:0})}},"Location"),r.a.createElement("span",{className:1===l?"active":""},"Merchandise")),r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement(qt.a,{disableUnderline:!0,placeholder:"Search",className:t.inputTypeSearch,variant:"outlined",onChange:function(t,a){return e.findProductCategories(t,a)}}),r.a.createElement(Qt.a,{component:"div",disablePadding:!0,className:"search-result"},s.map((function(a,n){return r.a.createElement("div",{key:a.key},a.displayName&&r.a.createElement(Jt.a,{key:a.key,className:t.nested},r.a.createElement(Xt.a,{primary:a.displayName}),r.a.createElement(Zt.a,null,r.a.createElement(dt.a,{edge:"end","aria-label":"add",onClick:function(t){return 0===l?e.handleOnSelection(a.uniqueId,t,a):e.handleOnMerchSelection(a.uniqueId,t,a.displayName)}},r.a.createElement(na.a,{className:"check-product"})))))})))),r.a.createElement("div",{className:"breadcrumb-result"},this.state.productBreadcrumb.map((function(t){return r.a.createElement("div",{className:"result-val",key:t.id,onClick:function(a){return e.gotoSelectedProductBreadCrumb(t)}},t.name)}))),r.a.createElement(Qt.a,{className:"merchandise-list",component:"div",disablePadding:!0},0===l&&r.a.createElement(ea.a,{className:t.cat_root,defaultCollapseIcon:r.a.createElement(la.a,null),defaultExpandIcon:r.a.createElement(ta.a,null),expanded:n,onNodeToggle:this.handleChange},i.regionDetails.region&&i.regionDetails.region.map((function(t,a){return r.a.createElement($t.a,{onClick:function(a){return e.handleProductBreadCrumbChange(t,a)},id:t.nodeId,key:t.nodeId,nodeId:t.nodeId,label:e.treeViewLabel(t)},t.affiliate.map((function(t,a){return r.a.createElement($t.a,{onClick:function(a){return e.handleProductBreadCrumbChange(t,a)},id:t.nodeId,key:t.nodeId,nodeId:t.nodeId,label:e.treeViewLabel(t)},t.channels.map((function(t,a){return r.a.createElement($t.a,{onClick:function(a){return e.handleProductBreadCrumbChange(t,a)},id:t.nodeId,key:t.nodeId,nodeId:t.nodeId,label:e.treeViewLabel(t)},t.planning_groups.map((function(t,a){return r.a.createElement($t.a,{onClick:function(a){return e.handleProductBreadCrumbChange(t,a)},id:t.nodeId,key:t.nodeId,nodeId:t.nodeId,label:e.treeViewLabel(t)})})))})))})))}))),1===l&&r.a.createElement("div",null,r.a.createElement(ea.a,{className:t.cat_root,defaultCollapseIcon:r.a.createElement(la.a,null),defaultExpandIcon:r.a.createElement(ta.a,null),expanded:n,onNodeToggle:this.handleChange},i.merchDetails.Brand&&i.merchDetails.Brand.map((function(t,a){return r.a.createElement($t.a,{id:t.nodeId,onClick:function(a){return e.handleProductBreadCrumbChange(t,a)},nodeId:t.nodeId,key:t.nodeId,label:e.treeViewMerchLabel(t)},t.Consumer.map((function(t,a){return r.a.createElement($t.a,{id:t.nodeId,onClick:function(a){return e.handleProductBreadCrumbChange(t,a)},nodeId:t.nodeId,key:t.nodeId,label:e.treeViewMerchLabel(t)},t.Category.map((function(t,a){return r.a.createElement($t.a,{id:t.nodeId,onClick:function(a){return e.handleProductBreadCrumbChange(t,a)},nodeId:t.nodeId,key:t.nodeId,label:e.treeViewMerchLabel(t)})})))})))})))))))}}]),a}(n.Component)),oa=Object(i.b)((function(e,t){return{home:e.home}}),{getMerchData:Ke,addProduct:Pe,showFlashMessage:Ye})(ia);var ca=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.home,a=e.showAssortBrowser,n=e.hideAssortBrowser;return r.a.createElement("div",{className:""},r.a.createElement("div",null,r.a.createElement(Ge.a,{onClick:function(){return a()},variant:"contained",color:"primary",className:"add-product nowrap"},r.a.createElement(ta.a,{className:"icon"}),"Add Merchandise & Location Views")),r.a.createElement(oa,{open:t.assortmentDialogOpen,onClose:function(){return n()}}))}}]),a}(n.Component),ua=Object(i.b)((function(e,t){return{home:e.home}}),{hideAssortBrowser:function(){return{type:"HIDE_ASSORT_BROWSER",payload:!1}},showAssortBrowser:Fe})(ca),da=a(253),ma=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={data:[]},n}return Object(u.a)(a,[{key:"splitData",value:function(e){var t=this;return e[je()].filter((function(e){return e.date>=t.props.graph.graphDomain[0]&&e.date<=t.props.graph.graphDomain[1]})).sort((function(e,t){return e.g_index-t.g_index}))}},{key:"getKPI",value:function(e){return e?e.KPI:0}},{key:"showKPIName",value:function(e,t){e.Region=yt(t).region,e.Affiliate=yt(t).affiliate,e.Channel=yt(t).channel,e["Planning Group"]=yt(t).planning_group_name,e.Brand=yt(t).brand,e.Consumer=yt(t).consumer,e.Category=yt(t).category}},{key:"setData",value:function(e,t){var a=this,n=[],r={},s={},l={},i={},o={},c={},u={},d={},m={},p={},h={};Object.keys(this.props.product.products).forEach((function(e){a.showKPIName(r,e),a.showKPIName(s,e),a.showKPIName(i,e),a.showKPIName(c,e),a.showKPIName(u,e),a.showKPIName(m,e),a.showKPIName(h,e),a.showKPIName(l,e),a.showKPIName(o,e),a.showKPIName(d,e),a.showKPIName(p,e),r.KPI="Sell-Out Units",s.KPI="Sell-Out Units LY",i.KPI="Sell-Out Units Plan",c.KPI="Demand",u.KPI="Demand LY",m.KPI="Demand Plan",h.KPI="Shipped Units",l.KPI="%Variance",o.KPI="%Variance",d.KPI="%Variance",p.KPI="%Variance",a.splitData(a.props.product.products[e]).forEach((function(e){var t=jt(e.g_index);r[t]=a.getKPI(e.sell_out_units_ytg)||a.getKPI(e.sell_out_units_ytd),s[t]=a.getKPI(e.sell_out_units_ly),l[t]=b(r[t],s[t])+"%",i[t]=a.getKPI(e.sell_out_units_sas),o[t]=b(r[t],i[t])+"%",c[t]=a.getKPI(e.demand_units_ytg)||a.getKPI(e.demand_units_ytd),u[t]=a.getKPI(e.demand_units_ly),d[t]=b(c[t],u[t])+"%",m[t]=a.getKPI(e.demand_units_sas),p[t]=b(c[t],m[t])+"%",h[t]=a.getKPI(e.shipments)})),n.push(Object(A.a)({},r),Object(A.a)({},s),Object(A.a)({},l),Object(A.a)({},i),Object(A.a)({},o),Object(A.a)({},c),Object(A.a)({},u),Object(A.a)({},d),Object(A.a)({},m),Object(A.a)({},p),Object(A.a)({},h))})),this.setState({data:n},(function(){t(!0)}))}},{key:"render",value:function(){var e=this,t=this.props.product.products;return r.a.createElement(r.a.Fragment,null,t&&Object.keys(t).length>0&&r.a.createElement(da.CSVLink,{data:this.state.data,asyncOnClick:!0,onClick:function(t,a){return e.setData(t,a)},className:"text-transparent export-csv",filename:"csv-data.csv"},r.a.createElement(Ge.a,{color:"primary",className:"send-button"})),t&&!Object.keys(t).length&&r.a.createElement("a",{class:"text-transparent export-csv"},r.a.createElement(Ge.a,{color:"primary",className:"send-button"})))}}]),a}(n.Component),pa=Object(i.b)((function(e,t){return{product:e.product,graph:e.graph}}),{})(ma),ha=(a(510),a(575)),_a=a(254),ya=a.n(_a),fa=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleAssortmentChartClick=function(e,t){e&&(n.props.graph.kpis.sell_out_units.selected||n.props.graph.kpis.demand_units.selected)&&n.props.showAssortmentVariables(t,e.activeTooltipIndex)},n.CustomTooltip=function(e){var t=e.active,a=e.payload,s=e.label,l=n.props.graph.kpis;if(t&&a&&a[0]&&a[0].payload){var i=a[0].payload;return r.a.createElement("div",{className:"custom-tooltip"},r.a.createElement("p",{className:"label"},"".concat(n.displayTimeName(s,i))),l.sell_out_units.selected&&r.a.createElement("p",{className:"label"},"".concat(l.sell_out_units.name,": ").concat(n.addData(i.sell_out_units_ytd&&i.sell_out_units_ytd.KPI,i.sell_out_units_ytg&&i.sell_out_units_ytg.KPI))),l.sell_out_units_ly.selected&&r.a.createElement("p",{className:"label"},"".concat(l.sell_out_units_ly.name,": ").concat(n.addData(i.sell_out_units_ly&&i.sell_out_units_ly.KPI))),l.sell_out_units_sas.selected&&r.a.createElement("p",{className:"label"},"".concat(l.sell_out_units_sas.name,": ").concat(n.addData(i.sell_out_units_sas&&i.sell_out_units_sas.KPI))),l.demand_units.selected&&r.a.createElement("p",{className:"label"},"".concat(l.demand_units.name,": ").concat(n.addData(i.demand_units_ytd&&i.demand_units_ytd.KPI,i.demand_units_ytg&&i.demand_units_ytg.KPI))),l.demand_units_ly.selected&&r.a.createElement("p",{className:"label"},"".concat(l.demand_units_ly.name,": ").concat(n.addData(i.demand_units_ly&&i.demand_units_ly.KPI))),l.demand_units_sas.selected&&r.a.createElement("p",{className:"label"},"".concat(l.demand_units_sas.name,": ").concat(n.addData(i.demand_units_sas&&i.demand_units_sas.KPI))),l.shipment.selected&&r.a.createElement("p",{className:"label"},"".concat(l.shipment.name,": ").concat(n.addData(i.shipments&&i.shipments.KPI))))}return null},n.state={chartTheme:{paddingV:10,paddingH:40,colorRef:"#f6617b",strokeWidth:2}},n}return Object(u.a)(a,[{key:"currentTestStartOfMonthDate",value:function(){var e=new Date;return"year"!==this.props.graph.filterPeriod&&"season"!==this.props.graph.filterPeriod||e.setDate(1),e.setHours(0,0,0,0),e}},{key:"currentTestStartOfMonthTime",value:function(){return this.currentTestStartOfMonthDate().getTime()}},{key:"addAssortmentInformation",value:function(e,t,a){return _t(e)&&_t(e).length>0?this.props.graph.showAlert?r.a.createElement("div",{className:"details notsimple"},a):r.a.createElement("div",{className:"details simple"},a):r.a.createElement("div",{className:"details"},a)}},{key:"removeAssortment",value:function(e){this.props.removeAssortment(e),this.props.showFlashMessage("Assortment successfully removed","success")}},{key:"handleAssortmentDetailClick",value:function(e){this.props.graph.showAlert&&this.props.showAssortmentAlerts(e)}},{key:"addData",value:function(e,t){return Number(Number(e)||Number(t)||0).toLocaleString()}},{key:"graphCenter",value:function(){return parseInt((this.props.graph.graphDomain[1]-this.props.graph.graphDomain[0])/2)}},{key:"getMaxWeek",value:function(e){return"weekly"===De()?this.props.graph.graphDomain[1]-ue(this.props.graph.graphDomain[1].slice(0,4)):this.props.graph.graphDomain[1]-de(this.props.graph.graphDomain[1].slice(0,4))}},{key:"getMinWeek",value:function(e){return"weekly"===De()?this.props.graph.graphDomain[0]-ue(this.props.graph.graphDomain[0].slice(0,4)):this.props.graph.graphDomain[0]-de(this.props.graph.graphDomain[0].slice(0,4))}},{key:"displayTimeName",value:function(e,t){return"weekly"===De()?"FW"+String(nt(t).fisc_week).slice(4,6)+" "+String(nt(t).fisc_week).slice(0,4):nt(t).fisc_month_name+" "+String(nt(t).fisc_month).slice(0,4)}},{key:"getWeekName",value:function(e){return"FW ".concat(e>52?e-52:e)}},{key:"getFullWeekName",value:function(e){return"Fiscal Week ".concat(e>52?e-52:e)}},{key:"getFullMonthName",value:function(e){var t=e;return e>12&&(t=e-12),"Month: "+ee()(t,"MM").format("MMM")}},{key:"getGraphValue",value:function(e,t){return e[t]&&e[t].KPI}},{key:"getTickCount",value:function(){return"weekly"===De()?this.props.graph.graphDomain[1]-ue(this.props.graph.graphDomain[1].slice(0,4))-(this.props.graph.graphDomain[0]-ue(this.props.graph.graphDomain[0].slice(0,4))-1):this.props.graph.graphDomain[1]-de(this.props.graph.graphDomain[1].slice(0,4))-(this.props.graph.graphDomain[0]-de(this.props.graph.graphDomain[0].slice(0,4))-1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.assortment,n=t.assortmentKey,s=this.props.graph,l=s.kpis,i=s.selectedProductId;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("div",{className:"checkbox-graph d-flex flex-column align-center"},r.a.createElement(ha.a,{checked:i===n,onChange:function(t){return e.props.handleSelectedProductChange(t.target.value)},value:n,inputProps:{"aria-label":"A"},name:"radio-button-product-kpi",label:"TEST ME",className:"inputbox-icon",disableRipple:!0}),this.props.graph.showAlert&&_t(a)&&_t(a).length>0&&r.a.createElement(pt.a,{className:"icon info-icon pointer",onClick:function(){return e.handleAssortmentDetailClick(n)}})),this.addAssortmentInformation(a,n,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"merchandise-val",onClick:function(){return e.handleAssortmentDetailClick(n)}},ft(n)),r.a.createElement(ya.a,{fontSize:"small",onClick:function(){return e.removeAssortment(n)}}))),r.a.createElement(D.i,{className:"graph"},r.a.createElement(D.d,{margin:{top:0,bottom:0,right:-15,left:this.state.chartTheme.paddingH},data:a[je()],onClick:function(t){return e.handleAssortmentChartClick(t,n)}},r.a.createElement(D.l,{dataKey:"g_index",type:"number",domain:[function(t){return e.getMinWeek(t)},function(t){return e.getMaxWeek(t)}],tickFormatter:function(e){return e},tickCount:this.getTickCount(),allowDataOverflow:!0,hide:!0}),r.a.createElement(D.k,{content:function(t){return e.CustomTooltip(t)}}),r.a.createElement(D.m,{allowDataOverflow:!1,fontSize:"10px",padding:{top:this.state.chartTheme.paddingV,bottom:this.state.chartTheme.paddingV},tickFormatter:function(e){return g.a.toHumanString(e)},orientation:"right"}),r.a.createElement(D.c,{horizontal:!1}),r.a.createElement(D.h,{x:ot(),stroke:this.state.chartTheme.colorRef,strokeWidth:this.state.chartTheme.strokeWidth}),l.sell_out_units.selected&&r.a.createElement(D.f,{type:"monotone",dataKey:function(t){return e.getGraphValue(t,K.sell_out_units_ytd.name)},stroke:K.sell_out_units_ytd.stroke,dot:!1,strokeWidth:K.sell_out_units_ytd.strokeWidth}),l.sell_out_units.selected&&r.a.createElement(D.f,{type:"monotone",dataKey:function(t){return e.getGraphValue(t,K.sell_out_units_ytg.name)},stroke:K.sell_out_units_ytg.stroke,strokeWidth:K.sell_out_units_ytg.strokeWidth,dot:!1,strokeDasharray:"5 5"}),l.sell_out_units_ly.selected&&r.a.createElement(D.f,{type:"monotone",dataKey:function(t){return e.getGraphValue(t,K.sell_out_units_ly.name)},stroke:K.sell_out_units_ly.stroke,dot:!1,strokeWidth:K.sell_out_units_ly.strokeWidth}),l.sell_out_units_sas.selected&&r.a.createElement(D.f,{type:"monotone",dataKey:function(t){return e.getGraphValue(t,K.sell_out_units_sas.name)},stroke:K.sell_out_units_sas.stroke,strokeWidth:K.sell_out_units_sas.strokeWidth,dot:!1}),l.sell_out_units.selected&&r.a.createElement(D.j,{type:"monotone",dataKey:function(t){return e.getGraphValue(t,K.sell_out_units_scatter.name)},stroke:K.sell_out_units_scatter.stroke,strokeWidth:K.sell_out_units_scatter.strokeWidth,dot:!1}),l.demand_units.selected&&r.a.createElement(D.j,{type:"monotone",dataKey:function(t){return e.getGraphValue(t,K.demand_units_scatter.name)},stroke:K.demand_units_scatter.stroke,strokeWidth:K.demand_units_scatter.strokeWidth,dot:!1}),l.demand_units.selected&&r.a.createElement(D.f,{type:"monotone",dataKey:function(t){return e.getGraphValue(t,K.demand_units_ytd.name)},stroke:K.demand_units_ytd.stroke,dot:!1,strokeWidth:K.demand_units_ytd.strokeWidth}),l.demand_units.selected&&r.a.createElement(D.f,{type:"monotone",dataKey:function(t){return e.getGraphValue(t,K.demand_units_ytg.name)},stroke:K.demand_units_ytg.stroke,strokeWidth:K.demand_units_ytg.strokeWidth,dot:!1,strokeDasharray:"5 5"}),l.demand_units_ly.selected&&r.a.createElement(D.f,{type:"monotone",dataKey:function(t){return e.getGraphValue(t,K.demand_units_ly.name)},stroke:K.demand_units_ly.stroke,dot:!1,strokeWidth:K.demand_units_ly.strokeWidth}),l.demand_units_sas.selected&&r.a.createElement(D.f,{type:"monotone",dataKey:function(t){return e.getGraphValue(t,K.demand_units_sas.name)},stroke:K.demand_units_sas.stroke,strokeWidth:K.demand_units_sas.strokeWidth,dot:!1}),l.shipment.selected&&r.a.createElement(D.f,{type:"monotone",dataKey:function(t){return e.getGraphValue(t,K.shipments.name)},stroke:K.shipments.stroke,dot:!1,strokeWidth:K.shipments.strokeWidth})))))}}]),a}(n.Component),ga=Object(i.b)((function(e,t){return{graph:e.graph}}),{showAssortmentAlerts:function(e){return{type:"SHOW_ASSORTMENT_ALERTS",payload:e}},showAssortmentVariables:function(e,t){return{type:"SHOW_ASSORTMENT_VARIABLES",payload:{product_id:e,activeTooltipIndex:t}}},handleSelectedProductChange:function(e){return{type:"HANDLE_SELECTED_PRODUCT_CHANGE",payload:e}},removeAssortment:function(e){return{type:"REMOVE_PRODUCT",payload:e}},showFlashMessage:Ye})(fa),Ea=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"splitData",value:function(){var e=this;return this.props.product&&this.props.product.products[this.props.graph.selectedProductId]?this.props.product.products[this.props.graph.selectedProductId][Ae[this.props.graph.filterPeriod].data].filter((function(t){return t.date>=e.props.graph.graphDomain[0]&&t.date<=e.props.graph.graphDomain[1]})):[{}]}},{key:"demand_units",value:function(){var e=0;return this.splitData().forEach((function(t){e=Number(e)+Number((t.demand_units_ytg||t.demand_units_ytd)&&(t.demand_units_ytg||t.demand_units_ytd).KPI||0)})),e}},{key:"demand_units_sas",value:function(){var e=0;return this.splitData().forEach((function(t){e=Number(e)+Number(t.demand_units_sas&&t.demand_units_sas.KPI||0)})),e}},{key:"render",value:function(){var e=this.props.graph;return r.a.createElement("ul",{className:"kpis-section kpis-section-top"},r.a.createElement("li",{className:"yearly paper sale-sec col-3"},r.a.createElement(_.a,{variant:"h3",className:"text-center text-uppercase"},"Item Plan Comparison"),r.a.createElement(_.a,{variant:"h4",className:"m-b-15-hard text-center"},it(e.graphDomain,e.filterPeriod)),r.a.createElement(_.a,{variant:"h4",className:"m-b-15-hard text-center"}),r.a.createElement("div",{className:"flex-row relative"},r.a.createElement(D.b,{barGap:121,barSize:50,width:258,height:170,data:[{name:"demand_pred",value:this.demand_units_sas(),demand_value:this.demand_units()}],margin:{top:5,right:0,left:20,bottom:5}},r.a.createElement(D.a,{isAnimationActive:!1,dataKey:"demand_value",fill:"#79ade8"}),r.a.createElement(D.a,{isAnimationActive:!1,dataKey:"value",fill:"#ea9191"})),r.a.createElement("div",{className:"demand-label plan-label"},g.a.toHumanString(this.demand_units())," ",r.a.createElement("span",null,"Demand Prediction")),r.a.createElement("div",{className:"demand-label pre-label"},g.a.toHumanString(this.demand_units_sas())," ",r.a.createElement("span",null,"Demand Plan")),r.a.createElement("div",{className:"center-val variance-val"},"%variance",r.a.createElement("br",null),r.a.createElement(_.a,{className:v(this.demand_units(),this.demand_units_sas())},O(this.demand_units(),this.demand_units_sas()),"%")))))}}]),a}(n.Component),ba=Object(i.b)((function(e,t){return{product:e.product,graph:e.graph}}),{})(Ea),va=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"splitData",value:function(){var e=this;return this.props.product&&this.props.product.products[this.props.graph.selectedProductId]?this.props.product.products[this.props.graph.selectedProductId][Ae[this.props.graph.filterPeriod].data].filter((function(t){return t.date>=e.props.graph.graphDomain[0]&&t.date<=e.props.graph.graphDomain[1]})):[{}]}},{key:"sell_out_units",value:function(){var e=0;return this.splitData().forEach((function(t){e=Number(e)+(Number(t.sell_out_units_ytg&&t.sell_out_units_ytg.KPI||0)||Number(t.sell_out_units_ytd&&t.sell_out_units_ytd.KPI||0))})),e}},{key:"sell_out_units_ly",value:function(){var e=0;return this.splitData().forEach((function(t){e=Number(e)+Number(t.sell_out_units_ly&&t.sell_out_units_ly.KPI||0)})),e}},{key:"demand_units",value:function(){var e=0;return this.splitData().forEach((function(t){e=Number(e)+(Number(t.demand_units_ytg&&t.demand_units_ytg.KPI||0)||Number(t.demand_units_ytd&&t.demand_units_ytd.KPI||0))})),e}},{key:"demand_units_ly",value:function(){var e=0;return this.splitData().forEach((function(t){e=Number(e)+Number(t.demand_units_ly&&t.demand_units_ly.KPI||0)})),e}},{key:"render",value:function(){var e=this.props.graph,t=this.props.product&&this.props.product.products[this.props.graph.selectedProductId];return r.a.createElement("ul",{className:"kpis-section kpis-section-top"},r.a.createElement("li",{className:"yearly paper col-2 graph-right text-center"},r.a.createElement(_.a,{variant:"h4",className:"m-b-0-hard text-center"},"Trend Plot KPI Summary"),r.a.createElement(_.a,{variant:"h6",className:"text-center"},it(e.graphDomain,e.filterPeriod)),r.a.createElement("ul",{className:"body variance-val"},r.a.createElement("li",null,r.a.createElement(_.a,{variant:"h5"},"Sell-Out Units"),r.a.createElement(y.a,{title:t?"Sum of YTD actuals + prediction for time selection (where available)":"Please select a product first"},r.a.createElement(_.a,null,g.a.toHumanString(this.sell_out_units()||0)))),r.a.createElement("li",null,r.a.createElement(_.a,{variant:"h5"},"Demand"),r.a.createElement(y.a,{title:t?"Sum of adjusted demand YTD actuals + PDU prediction for time selection":"Please select a product first"},r.a.createElement(_.a,null,g.a.toHumanString(this.demand_units()||0)))),r.a.createElement("li",null,r.a.createElement(_.a,{variant:"h5"},"Sell-Out Units LY"),r.a.createElement(y.a,{title:t?"Sum of LY actuals for time selection (where available)":"Please select a product first"},r.a.createElement(_.a,{className:"value-p"},g.a.toHumanString(this.sell_out_units_ly()||0)))),r.a.createElement("li",null,r.a.createElement(_.a,{variant:"h5"},"Demand LY"),r.a.createElement(y.a,{title:t?"Sum of adjusted demand LY actuals for time selection":"Please select a product first"},r.a.createElement(_.a,{className:"value-p"},g.a.toHumanString(this.demand_units_ly()||0)))),r.a.createElement("li",null,r.a.createElement(_.a,{variant:"h5"},"%Variance"),r.a.createElement(_.a,{className:v(this.sell_out_units(),this.sell_out_units_ly())+" value-p"},O(this.sell_out_units(),this.sell_out_units_ly()),"%")),r.a.createElement("li",null,r.a.createElement(_.a,{variant:"h5"},"%Variance"),r.a.createElement(_.a,{className:v(this.demand_units(),this.demand_units_ly())+" value-p"},O(this.demand_units(),this.demand_units_ly()),"%")))))}}]),a}(n.Component),Oa=Object(i.b)((function(e,t){return{product:e.product,graph:e.graph}}),{})(va),ka=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"downloadLocalStorage",value:function(){var e=document.createElement("a"),t=new Blob([localStorage.getItem("persist:pr_app")],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download="demand_sensing_configuration.txt",document.body.appendChild(e),e.click()}},{key:"handleFileRead",value:function(){localStorage.setItem("persist:pr_app",this.result),window.location.reload()}},{key:"handleFileChosen",value:function(e){var t=new FileReader;t.onloadend=this.handleFileRead,t.readAsText(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{color:"primary",className:"send-button",onClick:function(){return e.downloadLocalStorage()}},"Download Session"),r.a.createElement("label",{htmlFor:"config-file",className:"upload-btn"},"Upload Session"),r.a.createElement("input",{className:"hide",type:"file",id:"config-file",onChange:function(t){e.handleFileChosen(t.target.files[0])}}))}}]),a}(n.Component),Na=Object(i.b)((function(e,t){return{product:e.product,graph:e.graph}}),{})(ka),Sa=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).UpdatedDemandDot=function(e){var t=e.cx,a=e.cy,s=e.payload;return s.demand!==s.demand_original?r.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"10px",x:t-5,y:a-5,height:"10px"},r.a.createElement("path",{fill:n.state.chartTheme.color1,d:"M256,0C114.837,0,0,114.837,0,256s114.837,256,256,256s256-114.837,256-256S397.163,0,256,0z"})):null},n.UpdatedSupplyDot=function(e){var t=e.cx,a=e.cy,s=e.payload;return s.supply!==s.supply_original?r.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"10px",x:t-5,y:a-5,height:"10px"},r.a.createElement("path",{fill:n.state.chartTheme.color2,d:"M256,0C114.837,0,0,114.837,0,256s114.837,256,256,256s256-114.837,256-256S397.163,0,256,0z"})):null},n.InformationDot=function(e){var t=e.cx,a=e.cy,s=e.payload;return s.demand>=s.supply?r.a.createElement("svg",{height:"210",width:"500"},r.a.createElement("line",{x1:t,y1:a,x2:t,y2:a-(s.demand-s.supply)/3e5,style:{stroke:"rgb(0,255,0)",strokeWidth:2}}),"Sorry, your browser does not support inline SVG."):s.supply!==s.supply_original?r.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"10px",x:t-5,y:a-5,height:"10px"},r.a.createElement("path",{fill:n.state.chartTheme.color2,d:"M256,0C114.837,0,0,114.837,0,256s114.837,256,256,256s256-114.837,256-256S397.163,0,256,0z"})):null},n.state={showLoader:!0,currentDate:new Date,checkNewSupply:!0,selectedAssortment:{},graphDialogOpen:!1,selectedGraphIndex:0,detailsDialogOpen:!1,chartTheme:{color1:"#e8a369",color2:"#4171c6",color3:"#000000",color4:"#CCCCCC",colorRef:"#f6617b",strokeWidth:2,paddingV:10,paddingH:40}},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.loadData()}},{key:"render",value:function(){var e=this.props,t=e.graph,a=e.product.products;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"assortments-section"},r.a.createElement("div",{id:"loader-image",className:"hide"},r.a.createElement("img",{src:"https://www.realestateonline.gr/themes/drupal8_zymphonies_theme/images/show_loader.gif",alt:""})),r.a.createElement("div",{className:"d-flex body"},r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"top"},r.a.createElement("div",{className:"top-assortments"},r.a.createElement(_.a,{variant:"h3"},"Demand Prediction ",it(t.graphDomain,t.filterPeriod)),r.a.createElement("span",null," Aligned to LS&Co. Fiscal Calendar ")),r.a.createElement("div",{className:"date-filter-section"},r.a.createElement(Ge.a,{onClick:this.props.gotoPreviousDate},r.a.createElement(Qe.a,{htmlColor:"#1844A9"})),r.a.createElement(Ge.a,{onClick:this.props.gotoCurrentDate},"Time Scroll"),r.a.createElement(Ge.a,{onClick:this.props.gotoNextDate},r.a.createElement(Xe.a,{htmlColor:"#1844A9"})),r.a.createElement(at,null))),r.a.createElement("div",{className:"add-export"},r.a.createElement("div",{className:"d-flex align-start"},r.a.createElement(pa,null),r.a.createElement("div",{className:"paper graph-container"},r.a.createElement("div",{className:"show-alert"},r.a.createElement("ul",{className:"graph-header"},Object.keys(a)[0]&&r.a.createElement(Lt,{data:Object.values(a)[0][Ae[t.filterPeriod].data],now:ot(),theme:{},filterPeriod:t.filterPeriod}))),r.a.createElement("ul",{className:"hide-scroll graph-section"},Object.keys(a).map((function(e,t){var n=a[e];return r.a.createElement(ga,{key:e,assortmentKey:e,index:t,assortment:n})}))))),r.a.createElement("div",{className:"bottom"},r.a.createElement("div",{className:"color-checkbox"},r.a.createElement(Gt,null))))),r.a.createElement("div",{className:"sidebar flex-column"},r.a.createElement(Oa,null),r.a.createElement(ba,null),r.a.createElement(ua,null),r.a.createElement(Et,null),r.a.createElement(Bt,null),r.a.createElement("div",{className:"button-section"},r.a.createElement(Na,null))))))}}]),a}(n.Component),Da=Object(i.b)((function(e,t){return{graph:e.graph,product:e.product}}),{showFlashMessage:Ye,loadData:function(){return function(e,t){var a=t();e((function(e,t){return Promise.resolve().then((function(){var a=t();return e({type:"SET_INITIAL_DATA",payload:{year:ee()().format("YYYY"),products:a.graph.savedProducts}})}))})).then((function(){Te(a,e),We(a,e),Me(2019,De(),a,e),Me(2020,De(),a,e)})),we(e,a)}},gotoPreviousDate:function(){return{type:"GOTO_PREVIOUS",payload:!0}},gotoNextDate:function(){return{type:"GOTO_NEXT",payload:!0}},gotoCurrentDate:function(){return{type:"GOTO_CURRENT",payload:!0}}})(Sa);a(511);function ja(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ze,null),r.a.createElement("div",{className:"container dashboard"},r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"main-container"},r.a.createElement("ul",{className:"kpis-section kpis-section-top"},r.a.createElement("li",{className:"heading-sec"},r.a.createElement("img",{className:"",alt:"home",src:"/images/heading.svg"})),r.a.createElement(S,null),r.a.createElement(I,null)),r.a.createElement(Da,null),r.a.createElement(Ve,null)))))}a(512);var Ia=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={email:"",pwd:""},n}return Object(u.a)(a,[{key:"login",value:function(){this.props.AuthenticateUser(this.state.email,this.state.pwd)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"hero-section"},r.a.createElement("img",{src:"/images/logo-vertical.png",alt:"Levis"})),r.a.createElement("div",{className:"form-section"},r.a.createElement("form",{onSubmit:function(){e.login()}},r.a.createElement(_.a,{variant:"h1"},"Login"),r.a.createElement("div",{className:"field-section"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{name:"email",type:"text",placeholder:"Enter your email here",onKeyPress:function(t){13===t.which&&e.login()},onInput:function(t){e.setState({email:t.target.value})}})),r.a.createElement("div",{className:"field-section"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{name:"password",type:"password",onKeyPress:function(t){13===t.which&&e.login()},placeholder:"Enter your password here",onInput:function(t){e.setState({pwd:t.target.value})}}),r.a.createElement("div",null)),r.a.createElement("div",{className:"button-section"},r.a.createElement(Ge.a,{color:"primary",variant:"contained",onClick:function(){e.login()}},"Login")))))}}]),a}(n.Component),Aa=Object(i.b)((function(e,t){return{auth:e.auth}}),{AuthenticateUser:function(e,t){return He===e&&Be===t?{type:"login_type",payload:{email:e,pwd:t}}:{type:"SHOW_FLASH_MESSAGE",payload:{message:"Wrong email/password",severity:"error"}}},showFlashMessage:Ye})(Ia),Pa=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.graph.savedProducts.length||this.props.showAssortBrowser()}},{key:"render",value:function(){var e=this.props.auth.loggedIn;return r.a.createElement(p.a,null,r.a.createElement(h.d,null,!e&&r.a.createElement(h.b,{path:"/",exact:!0,component:Aa}),!e&&r.a.createElement(h.a,{to:"/",exact:!0,from:"/dashboard"}),e&&r.a.createElement(h.a,{to:"/dashboard",exact:!0,from:"/"}),e&&r.a.createElement(h.b,{path:"/dashboard",component:ja})))}}]),a}(n.Component),wa=Object(i.b)((function(e,t){return{auth:e.auth,graph:e.graph}}),{showAssortBrowser:Fe})(Pa),Ca=a(579),xa=a(574),Ma=a(569),La=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.shared.flash,a=t.alertOpen,n=t.alertMessage,s=t.severity;return r.a.createElement(Ca.a,{open:a,autoHideDuration:2e3,onClose:function(){return e.props.hideFlashMessage()}},r.a.createElement(xa.a,{elevation:6,variant:"filled",action:r.a.createElement(dt.a,{color:"inherit",size:"small"},r.a.createElement(Ma.a,null)),onClose:function(){return e.props.hideFlashMessage()},severity:s},n))}}]),a}(n.Component),Ka=Object(i.b)((function(e,t){return{shared:e.shared}}),{hideFlashMessage:function(){return{type:"HIDE_FLASH_MESSAGE",payload:!1}}})(La),Ta=(a(513),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Y()(Ne.getState,"shared.showLoader");Ne.subscribe(e((function(e,t,a){e?document.querySelector("body").classList.add("loader-body"):document.querySelector("body").classList.remove("loader-body")})))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null)}}]),a}(n.Component)),Wa=Object(i.b)((function(e,t){return{shared:e.shared}}),{hideLoader:function(){return{type:"HIDE_LOADER",payload:!1}}})(Ta),Ya=a(257),Fa=a(570);function Ra(){var e=Object(Ya.a)({typography:{fontFamily:["Roboto","sans-serif"].join(","),h1:{fontSize:34,fontWeight:600,lineHeight:1.21},h2:{fontSize:26,fontWeight:"normal",lineHeight:.77},h3:{fontSize:16,fontWeight:600,lineHeight:1},h4:{fontSize:20,fontWeight:600}}});return r.a.createElement(i.a,{store:Ne},r.a.createElement(o.a,{persistor:Se},r.a.createElement(Fa.a,{theme:e},r.a.createElement(wa,null),r.a.createElement(Ka,null),r.a.createElement(Wa,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Ra,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[290,1,2]]]);
//# sourceMappingURL=main.b0b617b4.chunk.js.map